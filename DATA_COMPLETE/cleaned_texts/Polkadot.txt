b polkadot vision heterogeneous multi chain framework draft 1 dr gavin wood founder ethereum parity gavin parity io abstract present day blockchain architectures suffer number issues practical means extensibility scalability believe stems tying important parts consensus architecture canonicality validity closely paper introduces architecture heterogeneous multi chain fundamentally sets apart compartmentalising parts keeping overall functionality provided absolute minimum security transport introduce practical means core extensibility situ scalability addressed divide conquer approach functions scaling bonded core incentivisation untrusted public nodes heterogeneous nature architecture enables highly divergent types consensus systems interoperating trustless fully decentralised xe2 x80 x9cfederation xe2 x80 x9d allowing open closed networks trust free access forward means providing backwards compatibility pre existing networks ethereum believe system provides useful base level component overall search practically implementable system capable achieving global commerce levels scalability privacy 1 preface technological promise grand talk significant real world deployment present technology believe key failures present technology stacks intended technical xe2 x80 x9cvision xe2 x80 x9d summary possible direction taken developing blockchain paradigm rationale direction sensible lays detail possible stage development system concrete improvement number aspects blockchain technology intended specification formal intended comprehensive final design intended cover non core aspects framework apis bindings languages usage notably experimental parameters specified likely change mechanisms added refined removed response community ideas critiques large portions paper likely revised experimental evidence prototyping gives information work document includes core description protocol ideas directions taken improve aspects envisioned core description starting point initial series proofs concept final xe2 x80 x9cversion 1 0 xe2 x80 x9d based refined protocol additional ideas proven determined required project reach goals 1 1 history xe2 x80 xa2 09 10 2016 xe2 x80 xa2 20 10 2016 xe2 x80 xa2 01 11 2016 xe2 x80 xa2 10 11 2016 scalability resources spent globally processing bandwidth storage system process single transaction transactions reasonably processed peak conditions isolatability divergent needs multiple parties applications addressed nearoptimal degree framework developability tools work apis address developers xe2 x80 x99 needs educational materials available right integrations governance network remain flexible evolve adapt time decisions sufficient inclusivity legitimacy transparency provide effective leadership decentralised system applicability technology actually address burning need xe2 x80 x9cmiddleware xe2 x80 x9d required order bridge gap actual applications present work aim address issues scalability isolatability said believe polkadot framework provide meaningful improvements classes problems modern efficient blockchain implementations parity ethereum client 17 process excess 3 000 transactions second running performant consumer hardware current real world blockchain networks practically limited 30 transactions second limitation mainly originates fact current synchronous consensus mechanisms require wide timing margins safety expected processing time exacerbated 0 1 0 proof1 0 1 0 proof2 0 1 0 proof3 0 1 0 2 introduction blockchains demonstrated great promise utility fields including xe2 x80 x9cinternet things xe2 x80 x9d iot finance governance identity management webdecentralisation asset tracking despite 1 x0cpolkadot vision heterogeneous multi chain framework desire support slower implementations underlying consensus architecture state transition mechanism means parties collate execute transactions logic fundamentally tied consensus xe2 x80 x9ccanonicalisation xe2 x80 x9d mechanism means parties agree number possible valid histories applies equally proof work pow systems bitcoin 15 ethereum 5 23 proofof stake pos systems nxt 8 bitshares 12 ultimately suffer handicap simple strategy helped blockchains success tightly coupling mechanisms single unit protocol bundle multiple different actors applications different risk profiles different scalability requirements different privacy needs size fit case desire broad appeal network adopts degree conservatism results lowest common denominator optimally serving ultimately leading failing ability innovate perform adapt dramatically systems e g factom 21 drop statetransition mechanism altogether utility desire requires ability transition state according shared state machine dropping solves alternative problem provide alternative solution clear reasonable direction explore route scalable decentralised compute platform decouple consensus architecture state transition mechanism unsurprisingly strategy polkadot adopts solution scalability 2 1 protocol implementation network like bitcoin ethereum polkadot refers network protocol hitherto presupposed primary public network runs protocol polkadot intended free open project protocol specification creative commons license code placed floss license project developed open manner accepts contributions useful system rfcs unlike python enhancement proposals allow means publicly collaborating protocol changes upgrades initial implementation polkadot protocol known parity polkadot platform include protocol implementation api bindings like parity blockchain implementations ppp designed general purpose blockchain technology stack uniquely public network private consortium operation development far funded parties including grant british government paper nonetheless describes polkadot context public network functionality envision public network superset required alternative e g private consortium settings furthermore context scope polkadot clearly described discussed mean draft 1 2 reader aware certain mechanisms described example interoperation public networks directly relevant polkadot deployed non public xe2 x80 x9cpermissioned xe2 x80 x9d situations 2 2 previous work decoupling underlying consensus state transition informally proposed private years xe2 x80 x94max kaye proponent strategy early days ethereum complex scalable solution known chain fibers dating june 2014 published later year1 case single relay chain multiple homogeneous chains providing transparent interchain execution mechanism decoherence paid transaction latency xe2 x80 x94transactions requiring coordination disparate portions system longer process polkadot takes architecture follow conversations people differs greatly design provisions systems comparable polkadot actually production systems relevance proposed substantial level detail proposals broken systems drop reduce notion globally coherent state machine attempt provide globally coherent singleton machine homogeneous shards target heterogeneity 2 2 1 systems global state factom 21 system demonstrates canonicality according validity effectively allowing chronicling data avoidance global state difficulties scaling brings considered scalable solution mentioned previously set problems solves strictly substantially smaller tangle 18 novel approach consensus systems arranging transactions blocks forming consensus strictly linked list globally canonical ordering state changes largely abandons idea heavily structured ordering instead pushes directed acyclic graph dependent transactions later items helping canonicalise earlier items explicit referencing arbitrary state changes dependency graph quickly intractable simpler utxo model2 reasonable system loosely coherent transactions generally independent large global parallelism natural utxo model effect limiting tangle purely value transfer xe2 x80 x9ccurrency xe2 x80 x9d system general extensible furthermore hard global coherency interaction systems xe2 x80 x94which tend need absolute degree knowledge system state xe2 x80 x94becomes impractical 1https github com ethereum wiki wiki chain fibers redux 2 unspent transaction output model bitcoin uses state effectively set address associated value transactions collate addresses reform new set addresses sum total equivalent x0cpolkadot vision heterogeneous multi chain framework 2 2 2 heterogeneous chain systems chains 3 proposed addition bitcoin protocol allow trustless interaction main bitcoin chain additional chains provision degree xe2 x80 x98rich xe2 x80 x99 interaction chains interaction limited allowing chains custodians xe2 x80 x99s assets effecting xe2 x80 x94in local jargon xe2 x80 x94a way peg 3 end vision framework bitcoin currency provided additional peripheral functionality pegging chains exotic state transition systems bitcoin protocol allows sense chains addresses extensibility scalability fundamentally provision validity chains tokens chain e g bitcoin held behalf chain secured chain xe2 x80 x99s ability incentivise miners canonicalise valid transitions security bitcoin network easily transitioned work behalf blockchains furthermore protocol ensuring bitcoin miners merge duplicate canonicalisation power chain importantly validate chain xe2 x80 x99s transitions outside scope proposal cosmos 10 proposed multi chain system vein chains swapping nakamoto pow consensus method jae kwon xe2 x80 x99s tendermint algorithm essentially describes multiple chains operating zones individual instances tendermint means trust free communication master hub chain interchain communication limited transfer digital assets xe2 x80 x9cspecifically tokens xe2 x80 x9d arbitrary information interchain communication return path data e g report sender status transfer validator sets zoned chains particular means incentivising like chains left unsolved problem general assumption zoned chain hold token value inflation pay validators early stages design present proposal lacks comprehensive details economic means achieving scalable certainty global validity loose coherence required zones hub allow additional flexibility parameters zoned chains compared system enforcing stronger coherence 2 2 3 casper comprehensive review sideby comparison casper 6 polkadot fairly sweeping accordingly inaccurate characterisation casper reimagining pos consensus algorithm based participants betting fork ultimately canonical substantial consideration given ensuring robust network forks prolonged additional degree scalability basic ethereum model casper date tended substantially complex protocol polkadot forebears substantial deviation basic blockchain format draft 1 3 remains unseen casper iterate future look like finally deployed casper polkadot represent interesting new protocols sense augmentations ethereum substantial differences ultimate goals paths deployment casper ethereum foundation centered project originally designed pos alteration protocol desire create fundamentally scalable blockchain crucially designed hard fork expansive ethereum clients users required upgrade remain fork uncertain adoption deployment substantially difficult inherent decentralised project tight coordination necessary polkadot differs ways foremost polkadot designed fully extensible scalable blockchain development deployment interaction test bed built largely future proof harness able assimilate new blockchain technology available complicated decentralised coordination hard forks envision use cases encrypted consortium chains high frequency chains low block times unrealistic future version ethereum currently envisioned finally coupling ethereum extremely loose action ethereum necessary enable trustless transaction forwarding networks short casper ethereum 2 0 polkadot share fleeting similarities believe end goal substantially different competing protocols likely ultimately co exist mutually beneficial relationship foreseeable future 3 summary polkadot scalable heterogeneous multi chain means unlike previous blockchain implementations focused providing single chain varying degrees generality potential applications polkadot designed provide inherent application functionality polkadot provides bedrock xe2 x80 x9crelay chain xe2 x80 x9d large number validatable globally coherent dynamic data structures hosted data structures xe2 x80 x9cparallelised xe2 x80 x9d chains parachains specific need blockchain nature words polkadot considered equivalent set independent chains e g set containing ethereum ethereum classic namecoin bitcoin important points xe2 x80 xa2 pooled security xe2 x80 xa2 trust free interchain transactability points consider polkadot xe2 x80 x9cscalable xe2 x80 x9d principle problem deployed polkadot substantially parallelised xe2 x80 x94scaled xe2 x80 x94over large number parachains aspects parachain conducted parallel different segment polkadot network system ability scale polkadot provides bare bones piece 3 opposed way peg essentially action destroying tokens chain create tokens mechanism converse order recover original tokens x0cpolkadot vision heterogeneous multi chain framework infrastructure leaving complexity addressed middleware level conscious decision intended reduce development risk enabling requisite software developed short time span good level confidence security robustness 3 1 philosophy polkadot polkadot provide absolute rock solid foundation build wave consensus systems right risk spectrum production capable mature designs nascent ideas providing strong guarantees security isolation communication polkadot allow parachains select range properties foresee experimental blockchains pushing properties considered sensible today conservative high value chains similar bitcoin z cash 20 co existing alongside lower value xe2 x80 x9ctheme chains xe2 x80 x9d marketing fun test nets zero near zero fees fully encrypted xe2 x80 x9cdark xe2 x80 x9d consortium chains operating alongside xe2 x80 x94and providing services xe2 x80 x94highly functional open chains like ethereum experimental new vm based chains subjective time charged wasm chain means outsourcing difficult compute problems mature ethereum like chain restricted bitcoin like chain manage chain upgrades polkadot inherently support sort governance structure likely based existing stable political systems having bicameral aspect similar yellow paper council 24 ultimate authority underlying stakable token holders xe2 x80 x9creferendum xe2 x80 x9d control reflect users xe2 x80 x99 need development developers xe2 x80 x99 need legitimacy expect reasonable direction form chambers xe2 x80 x9cuser xe2 x80 x9d committee bonded validators xe2 x80 x9ctechnical xe2 x80 x9d committee major client developers ecosystem players body token holders maintain ultimate legitimacy form supermajority augment reparameterise replace dissolve structure don xe2 x80 x99t doubt eventual need words twain xe2 x80 x9cgovernments diapers changed reason xe2 x80 x9d reparameterisation typically trivial arrange larger consensus mechanism qualitative changes replacement augmentation likely need non automated xe2 x80 x9csoft decrees xe2 x80 x9d e g canonicalisation block number hash document formally specifying new protocol necessitate core consensus mechanism contain sufficiently rich language describe aspect need change eventual aim likely chosen order facilitate reasonable development timeline polkadot xe2 x80 x99s primary tenets rules evaluate design decisions minimal polkadot little functionality possible simple additional complexity present base protocol reasonably 4 draft 1 offloaded middleware placed parachain introduced later optimisation general unnecessary requirement constraint limitation placed parachains polkadot test bed consensus system development optimised making model extensions fit abstract possible robust polkadot provide fundamentally stable base layer addition economic soundness means decentralising minimise vectors high reward attacks 4 participation polkadot basic roles upkeep polkadot network collator fisherman nominator validator possible implementation polkadot role actually broken roles basic validator availability guarantor discussed section 6 5 3 collator provides block candidates monitors fisherman reports bad behaviour validators group nominator approves validators groups figure 1 interaction roles polkadot 4 1 validators validator highest charge helps seal new blocks polkadot network validator xe2 x80 x99s role contingent sufficiently high bond deposited allow bonded parties nominate validators act portion validator xe2 x80 x99s bond necessarily owned validator nominators validator run relay chain client implementation high availability bandwidth block node ready accept role ratifying new block nominated parachain process involves receiving validating republishing candidate blocks nomination deterministic virtually unpredictable advance validator reasonably expected maintain fully synchronised database parachains expected validator nominate task devising suggested new parachain block party known collator new parachain blocks properly ratified appointed validator subgroups validators ratify relay chain block involves updating state transaction queues essentially moving data parachain xe2 x80 x99s output queue parachain xe2 x80 x99s input queue processing transactions ratified relay chain transaction set ratifying final block including final parachain changes x0cpolkadot vision heterogeneous multi chain framework validator fulfilling duty find consensus rules chosen consensus algorithm punished initial unintentional failures withholding validator xe2 x80 x99s reward repeated failures result reduction security bond burning provably malicious actions double signing conspiring provide invalid block result loss entire bond partially burnt given informant honest actors sense validators similar mining pools current pow blockchains 4 2 nominators nominator stake holding party contributes security bond validator additional role place risk capital signal trust particular validator set thereof act responsibly maintenance network receive pro rata increase reduction deposit according bond xe2 x80 x99s growth contribute collators nominators sense similar miners present day pow networks 4 3 collators transaction collators collators short parties assist validators producing valid parachain blocks maintain xe2 x80 x9cfull node xe2 x80 x9d particular parachain meaning retain necessary information able author new blocks execute transactions way miners current pow blockchains normal circumstances collate execute transactions create unsealed block provide zero knowledge proof validators presently responsible proposing parachain block precise nature relationship collators nominators validators likely change time initially expect collators work closely validators parachain s little transaction volume initial client implementation include rpcs allow parachain collator node unconditionally supply relaychain validator node provably valid parachain block cost maintaining synced version parachains increases expect additional infrastructure place help separate duties independent economically motivated parties eventually expect collator pools vie collect transaction fees collators contracted serve particular validators period time going share reward proceeds alternatively xe2 x80 x9cfreelance xe2 x80 x9d collators simply create market offering valid parachain blocks return competitive share reward payable immediately similarly decentralised nominator pools allow multiple bonded participants coordinate share duty validator ability pool ensures open participation leading decentralised system 4 4 fishermen unlike active parties fishermen directly related block authoring process independent xe2 x80 x9cbounty hunters xe2 x80 x9d motivated large reward precisely draft 1 5 existence fishermen expect events misbehaviour happen seldom bonded party careless secret key security malicious intent comes expected frequency reward minimal requirements eventual reward size fishermen reward timely proof bonded party acted illegally illegal actions include signing blocks ratified parent case parachains helping ratify invalid block prevent rewarding compromise illicit use session xe2 x80 x99s secret key base reward providing single validator xe2 x80 x99s illegally signed message minimal reward increases asymptotically corroborating illegal signatures validators provided implying genuine attack asymptote set 66% following base security assertion thirds validators act benevolently fishermen somewhat similar xe2 x80 x9cfull nodes xe2 x80 x9d present day blockchain systems resources needed relatively small commitment stable uptime bandwidth necessary fishermen differ post small bond bond prevents sybil attacks wasting validators xe2 x80 x99 time compute resources immediately withdrawable probably equivalent dollars lead reaping hefty reward spotting misbehaving validator 5 design overview section intended brief overview system thorough exploration system given section following 5 1 consensus relay chain polkadot achieves low level consensus set mutually agreed valid blocks modern asynchronous byzantine faulttolerant bft algorithm algorithm inspired simple tendermint 11 substantially involved honeybadgerbft 14 provides efficient fault tolerant consensus arbitrarily defective network infrastructure given set benign authorities validators proof authority poa style network sufficient polkadot imagined deployable network fully open public situation particular organisation trusted authority required maintain need means determining set validators incentivising honest utilise pos based selection criteria 5 2 proving stake assume network means measuring xe2 x80 x9cstake xe2 x80 x9d particular account ease comparison pre existing systems unit measurement xe2 x80 x9ctokens xe2 x80 x9d unfortunately term ideal number reasons simply scalar value associated account notion individuality imagine validators elected infrequently day seldom quarter nominated proof stake npos scheme incentivisation happen pro rata allocation x0cpolkadot vision heterogeneous multi chain framework draft 1 6 transaction submitted external actor propagated transactions collator block candidate submission propagated block validator swarm fisherman coloured designated parachain 2nd order relay chain parachain community account inbound transaction interchain transactions managed validators relay chain outbound transaction parachain parachain bridge parachain queues o virtual parachain e g ethereum figure 2 summary schematic polkadot system shows collators collecting propagating user transactions propagating block candidates fishermen validators shows account post transaction carried parachain relay chain parachain interpreted transaction account funds coming token base expansion 100% year likely 10% transaction fees collected monetary base expansion typically leads inflation token owners fair opportunity participation tokenholder need suffer reduction value holdings time provided happy role consensus mechanism particular proportion tokens targeted staking process effective token base expansion adjusted market based mechanism reach target validators bonded heavily stakes exiting validators xe2 x80 x99 bonds remain place long validators xe2 x80 x99 duties cease 3 months long bond liquidation period allows future misbehaviour punished periodic checkpointing chain misbehaviour results punishment reduction reward cases intentionally compromise network xe2 x80 x99s integrity validator losing stake validators informants stakeholders burning example validator attempts ratify branches fork known xe2 x80 x9cshort range xe2 x80 x9d attack identified punished way long range xe2 x80 x9cnothing stake xe2 x80 x9d attacks4 circumvented simple xe2 x80 x9ccheckpoint xe2 x80 x9d latch prevents dangerous chain reorganisation particular chain depth ensure newly syncing clients able fooled wrong chain regular xe2 x80 x9chard forks xe2 x80 x9d occur period validators xe2 x80 x99 bond liquidation hard code recent checkpoint block hashes clients plays footprint reducing measure xe2 x80 x9cfinite chain length xe2 x80 x9d periodic reseting genesis block 5 3 parachains collators parachain gets similar security affordances relay chain parachains xe2 x80 x99 headers sealed relay chain block ensuring reorganisation xe2 x80 x9cdouble spending xe2 x80 x9d possible following confirmation similar security guarantee offered bitcoin xe2 x80 x99s chains mergemining polkadot provides strong guarantees parachains xe2 x80 x99 state transitions valid happens set validators cryptographically randomly segmented subsets subset parachain subsets potentially differing block setup generally implies parachains xe2 x80 x99 block times long relay chain specific means determining partitioning outside scope 4such attack adversary forges entirely new chain history genesis block onwards controlling relatively insignificant portion stake offset able incrementally increase portion stake relative stakeholders active participants alternative history intrinsic physical limitation exists creation blocks unlike pow real computational energy spent able craft chain longer real chain relatively short timespan potentially longest best taking canonical state network x0cpolkadot vision heterogeneous multi chain framework document likely based commit reveal framework similar randao 19 use data combined previous blocks parachain cryptographically secure hash subsets validators required provide parachain block candidate guaranteed valid pain bond confiscation validity revolves important points firstly intrinsically valid xe2 x80 x94that state transitions executed faithfully external data referenced e transactions valid inclusion secondly data extrinsic candidate external transactions sufficiently high availability participants able download execute block manually 5 validators provide xe2 x80 x9cnull xe2 x80 x9d block containing external xe2 x80 x9ctransactions xe2 x80 x9d data run risk getting reduced reward work alongside parachain gossip protocol collators xe2 x80 x94individuals collate transactions blocks provide noninteractive zero knowledge proof block constitutes valid child parent taking transaction fees trouble left parachain protocols specify means spam prevention fundamental notion xe2 x80 x9ccompute resource metering xe2 x80 x9d xe2 x80 x9ctransaction fee xe2 x80 x9d imposed relay chain direct enforcement relay chain protocol unlikely stakeholders choose adopt parachain didn xe2 x80 x99t provide decent mechanism explicit nod possibility chains unlike ethereum e g bitcoin like chain simpler fee model proposed spamprevention model polkadot xe2 x80 x99s relay chain probably exist ethereum like accounts state chain possibly evmderivative relay chain nodes required substantial processing transaction throughput minimised partly large transaction fees research models require block size limit 5 4 interchain communication critical final ingredient polkadot interchain communication parachains sort information channel allow consider polkadot scalable multi chain case polkadot communication simple transactions executing parachain according logic chain able effect dispatch transaction second parachain potentially relay chain like external transactions production blockchains fully asynchronous intrinsic ability return kind information origin draft 1 account sends post entry placed egress merkle tree destination parachain source shares data block xe2 x80 x99s validators proof post stored parachain egress merkle tree 7 account receives post entry removed ingress merkle tree destination gets egress ingress data prior block xe2 x80 x99s validators routed reference placed destination parachain xe2 x80 x99s ingress merkle tree figure 3 basic schematic showing main parts routing posted transactions xe2 x80 x9dposts xe2 x80 x9d ensure minimal implementation complexity minimal risk minimal straight jacketing future parachain architectures interchain transactions effectively indistinguishable standard externallysigned transactions transaction origin segment providing ability identify parachain address arbitrary size unlike common current systems bitcoin ethereum interchain transactions come kind xe2 x80 x9cpayment xe2 x80 x9d fee associated payment managed negotiation logic source destination parachains system proposed ethereum xe2 x80 x99s serenity release 7 simple means managing cross chain resource payment assume come fore course interchain transactions resolved simple queuing mechanism based merkle tree ensure fidelity task relay chain maintainers transactions output queue parachain input queue destination parachain passed transactions referenced relay chain relay chain transactions prevent parachain spamming parachain transactions transaction sent required destination xe2 x80 x99s input queue large time end previous block input queue large block processing considered xe2 x80 x9csaturated xe2 x80 x9d transactions routed subsequent blocks reduced limit queues administered relay chain allowing parachains determine xe2 x80 x99s saturation status way failed attempt post transaction stalled destination reported synchronously return path exists secondary transaction failed reason reported original caller means recovery place 5 5 polkadot ethereum ethereum xe2 x80 x99s turing completeness expect ample opportunity polkadot ethereum interoperable easily deducible security bounds short envision transactions polkadot signed validators fed 5such task shared validators designate task set heavily bonded validators known availability guarantors x0cpolkadot vision heterogeneous multi chain framework ethereum interpreted enacted transaction forwarding contract direction foresee usage specially formatted logs events coming xe2 x80 x9cbreak contract xe2 x80 x9d allow swift verification particular message forwarded 5 5 1 polkadot ethereum choice bft consensus mechanism validators formed set stakeholders determined approval voting mechanism able secure consensus infrequently changing modest number validators system total 144 validators block time 4 seconds 900 block finality allowing malicious behaviour double votes reported punished repaired validity block reasonably considered proven little 97 signatures twothirds 144 plus following 60 minute verification period challenges deposited ethereum able host xe2 x80 x9cbreak contract xe2 x80 x9d maintain 144 signatories controlled elliptic curve digital signature ecdsa recovery takes 3 000 gas evm likely want validation happen super majority validators unanimity base cost ethereum confirming instruction properly validated coming polkadot network 300 000 gas xe2 x80 x94a mere 6% total block gas limit 5 5m increasing number validators necessary dealing dozens chains inevitably increases cost broadly expected ethereum xe2 x80 x99s transaction bandwidth grow time technology matures infrastructure improves fact validators need involved e g highest staked validators called task limits mechanism extend reasonably assuming daily rotation validators fairly conservative xe2 x80 x94weekly monthly acceptable cost network maintaining ethereum forwarding bridge 540 000 gas day present gas prices $45 year basic transaction forwarded bridge cost $0 11 additional contract computation cost course buffering bundling transactions break authorisation costs easily shared reducing cost transaction substantially 20 transactions required forwarding cost forwarding basic transaction fall $0 01 interesting cheaper alternative multisignature contract model use threshold signatures order achieve multi lateral ownership semantics threshold signature schemes ecdsa computationally expensive schemes schnorr signatures reasonable ethereum plans introduce primitives schemes cheap use upcoming metropolis hardfork means able utilised gas costs forwarding polkadot transaction ethereum network dramatically reduced near zero overhead basic costs validating signature executing underlying transaction draft 1 8 model polkadot xe2 x80 x99s validator nodes little sign messages transactions actually routed ethereum network assume validators reside ethereum network likely small bounties offered actor forwards message network bounty trivially paid transaction originator 5 5 2 ethereum polkadot getting transactions forwarded ethereum polkadot uses simple notion logs ethereum contract wishes dispatch transaction particular parachain polkadot need simply special xe2 x80 x9cbreak contract xe2 x80 x9d break contract payment required issue logging instruction existence proven merkle proof assertion corresponding block xe2 x80 x99s header valid canonical conditions validity straightforward prove principle requirement polkadot node needing proof e appointed validator nodes running fully synchronised instance standard ethereum node unfortunately heavy dependency lightweight method use simple proof header evaluated correctly supplying ethereum xe2 x80 x99s state trie needed properly execute transactions block check logs contained block receipt valid xe2 x80 x9cspv like xe2 x80 x9d6 proofs require substantial information conveniently typically needed bond system inside polkadot allow bonded parties submit headers risk losing bond party xe2 x80 x9cfisherman xe2 x80 x9d 6 2 3 provide proof header invalid specifically state root receipt roots impostors non finalising pow network like ethereum canonicality impossible proof conclusively address applications attempt rely kind chain dependent cause effect wait number xe2 x80 x9cconfirmations xe2 x80 x9d dependent transaction particular depth chain ethereum depth varies 1 block valuable transactions known network issues 1200 blocks case initial frontier release exchanges stable xe2 x80 x9chomestead xe2 x80 x9d network figure sits 120 blocks exchanges likely similar parameter imagine polkadot ethereuminterface simple functions able accept new header ethereum network validate pow able accept proof particular log emitted ethereum breakout contract header sufficient depth forward corresponding message polkadot finally able accept proofs previously accepted enacted header contains invalid receipt root actually ethereum header data spv proofs validity canonicality refutations polkadot network incentivisation forwarding 6spv refers simplified payment verification bitcoin describes method clients verify transactions keeping copy blocks headers longest pow chain x0cpolkadot vision heterogeneous multi chain framework data needed simple payment funded fees collected ethereum paid able forward useful block header valid validators called retain information relating thousand blocks order able manage forks protocolintrinsic means contract maintained relay chain 5 6 polkadot bitcoin bitcoin interoperation presents interesting challenge polkadot called xe2 x80 x9ctwo way peg xe2 x80 x9d useful piece infrastructure networks limitations bitcoin providing peg securely non trivial undertaking delivering transaction bitcoin polkadot principle process similar ethereum xe2 x80 x9cbreak address xe2 x80 x9d controlled way polkadot validators receive transferred tokens data sent alongside spv proofs provided incentivised oracles confirmation period bounty given identifying non canonical blocks implying transaction xe2 x80 x9cdouble spent xe2 x80 x9d tokens owned xe2 x80 x9cbreak address xe2 x80 x9d principle controlled validators later dispersal problem deposits securely controlled rotating validator set unlike ethereum able arbitrary decisions based combinations signatures bitcoin substantially limited clients accepting multisignature transactions maximum 3 parties extending 36 thousands ultimately desired impossible current protocol option alter bitcoin protocol enable functionality called xe2 x80 x9chard forks xe2 x80 x9d bitcoin world difficult arrange judging recent attempts possibility use threshold signatures cryptographic schemes allow singly identifiable public key effectively controlled multiple secret xe2 x80 x9cparts xe2 x80 x9d utilised create valid signature unfortunately threshold signatures compatible bitcoin xe2 x80 x99s ecdsa computationally expensive create polynomial complexity schemes schnorr signatures provide far lower costs timeline introduced bitcoin protocol uncertain ultimate security deposits rests number bonded validators option reduce multi signature key holders heavily bonded subset total validators threshold signatures feasible worst bitcoin xe2 x80 x99s native multi signature possible course reduces total bonds deducted reparations validators behave illegally graceful degradation simply setting upper limit funds securely run networks % losses attack validators succeed believe unrealistic place reasonably secure bitcoin interoperability xe2 x80 x9cvirtual parachain xe2 x80 x9d draft 1 9 networks nonetheless substantial effort uncertain timeline possibly requiring cooperation stakeholders network 6 protocol depth protocol roughly broken parts consensus mechanism parachain interface interchain transaction routing 6 1 relay chain operation relay chain likely chain broadly similar ethereum state based state mapping address account information mainly balances prevent replays transaction counter placing accounts fulfils purpose provide accounting identity possesses stake system 7 notable differences xe2 x80 xa2 contracts deployed transactions following desire avoid application functionality relay chain support public deployment contracts xe2 x80 xa2 compute resource usage xe2 x80 x9cgas xe2 x80 x9d accounted functions available public usage fixed rationale gas accounting longer holds flat fee apply cases allowing performance dynamic code execution need simpler transaction format xe2 x80 xa2 special functionality supported listed contracts allows auto execution networkmessage outputs event relay chain vm based evm number modifications ensure maximal simplicity likely number built contracts similar addresses 1 4 ethereum allow platform specific duties managed including consensus contract validator contract parachain contract evm webassembly 2 wasm backend likely alternative case overall structure similar need built contracts wasm viable target general purpose languages immature limited languages evm likely deviations present ethereum protocol possible example simplification transaction receipt format allowing parallel execution non conflicting transactions block proposed serenity series changes possible unlikely serenity like xe2 x80 x9cpure xe2 x80 x9d chain deployed relay chain allowing particular contract manage things like staking token balances making fundamental chain xe2 x80 x99s protocol present feel unlikely offer sufficiently great protocol simplification worth additional complexity uncertainty involved developing 7as means representing given holder responsible overall security system stake accounts inevitably encode economic value understood intention values way purpose exchanging real world goods services accordingly noted tokens likened currency relay chain retain nihilistic philosophy applications x0cpolkadot vision heterogeneous multi chain framework number small pieces functionality required administrating consensus mechanism validator set validation mechanism parachains implemented monolithic protocol reasons auguring modularity describe xe2 x80 x9ccontracts xe2 x80 x9d relay chain taken mean objects sense object orientated programming managed relaychain xe2 x80 x99s consensus mechanism necessarily defined programs evm like opcodes individually addressable account system 6 2 staking contract contract maintains validator set manages xe2 x80 xa2 accounts currently validators xe2 x80 xa2 available validators short notice xe2 x80 xa2 accounts placed stake nominating validator xe2 x80 xa2 properties including staking volume acceptable payout rates addresses shortterm session identities allows account register desire bonded validator requirements nominate identity preexisting bonded validators register desire exit status includes machinery validation canonicalisation mechanism 6 2 1 stake token liquidity generally desirable total staking tokens possible staked network maintenance operations directly ties network security overall xe2 x80 x9cmarket capitalisation xe2 x80 x9d staking token easily incentivised inflating currency handing proceeds participate validators presents problem token locked staking contract punishment reduction substantial portion remain sufficiently liquid order allow price discovery answer allowing straight forward derivative contract securing fungible tokens underlying staked token difficult arrange trustfree manner furthermore derivative tokens treated equally reason different eurozone government xe2 x80 x99s bonds fungible chance underlying asset failing worthless eurozone governments default validator staked tokens validator act maliciously punished keeping tenets elect simplest solution tokens staked mean proportion 20% tokens forcibly remain liquid imperfect security perspective unlikely fundamental difference security network 80% reparations possible bond confiscations able compared xe2 x80 x9cperfect case xe2 x80 x9d 100% staking ratio staked liquid tokens targeted fairly simply reverse auction mechanism essentially token holders interested validator post offer staking contract stating minimum payout rate require draft 1 10 beginning session sessions happen regularly hour validator slots filled according validator xe2 x80 x99s stake payout rate possible algorithm lowest offers represent stake higher total stake targeted divided number slots lower lowerbound half slots filled lower bound repeatedly reduced factor order satisfy 6 2 2 nominating possible trustlessly nominate ones staking tokens active validator giving responsibility validators duties nominating works approval voting system nominator able post instruction staking contract expressing validator identities responsibility prepared entrust bond session nominators xe2 x80 x99 bonds dispersed represented validators dispersal algorithm optimises set validators equivalent total bonds nominators xe2 x80 x99 bonds effective responsibility validator gain interest suffer punishment reduction accordingly 6 2 3 bond confiscation burning certain validator behaviour results punitive reduction bond bond reduced allowable minimum session prematurely ended started nonexhaustive list punishable validator misbehaviour includes xe2 x80 xa2 parachain group unable provide consensus validity parachain block xe2 x80 xa2 actively signing validity invalid parachain block xe2 x80 xa2 inability supply egress payloads previously voted available xe2 x80 xa2 inactivity consensus process xe2 x80 xa2 validating relay chain blocks competing forks cases misbehaviour threaten network xe2 x80 x99s integrity signing invalid parachain blocks validating multiple sides fork result effective exile total reduction bond cases e g inactivity consensus process cases blame precisely allotted ineffective group small portion bond instead fined case works sub group churn ensure malicious nodes suffer substantially loss collaterallydamaged benevolent nodes cases e g multi fork validation invalid sub block signing validators easily detect xe2 x80 x99 misbehaviour constant verification parachain block arduous task necessary enlist support parties external validation process verify report misbehaviour parties reward reporting activity term xe2 x80 x9cfishermen xe2 x80 x9d stems unlikeliness reward cases typically envision rewards easily paid confiscated bond general prefer balance burning e reduction reallocation attempting wholesale reallocation effect x0cpolkadot vision heterogeneous multi chain framework increasing overall value token compensating network general degree specific party involved discovery mainly safety mechanism large amounts involved lead extreme acute behaviour incentivisation bestowed single target general important reward sufficiently large verification worthwhile network large offset costs fronting financed orchestrated xe2 x80 x9dindustrial level xe2 x80 x9d criminal hacking attack unlucky validator force misbehaviour way claimed generally greater direct bond errant validator lest perverse incentive arise misbehaving reporting oneself bounty combated explicitly minimum direct bond requirement validator implicitly educating nominators validators little bonds deposited great incentive behave 6 3 parachain registry parachain defined registry relatively simple database like construct holds static dynamic information chain static information includes chain index simple integer validation protocol identity means distinguishing different classes parachain correct validation algorithm run validators consigned putting forward valid candidate initial proof concept focus placing new validation algorithms clients effectively requiring hard fork protocol time additional class chain added ultimately possible specify validation algorithm way rigorous efficient clients able effectively work new parachains hard fork possible avenue specify parachain validation algorithm established natively compiled platform neutral language webassembly additional research necessary determine truly feasible bring tremendous advantage banishing hard forks good dynamic information includes aspects transaction routing system global agreement parachain xe2 x80 x99s ingress queue described section 6 6 registry able parachains added referendum voting managed internally likely placed external referendum contract order facilitate usage general governance components parameters voting requirements e g quorum required majority required registration additional chains formal system upgrades set xe2 x80 x9cmaster constitution xe2 x80 x9d likely follow fairly traditional path initially precise formulation scope present work e g thirds supermajority pass total system stake voting positively sensible starting point additional operations include suspension removal parachains suspension hopefully draft 1 11 happen designed safeguard intractable problem parachain xe2 x80 x99s validation system obvious instance needed consensus critical difference implementations leading validators unable agree validity blocks validators encouraged use multiple client implementations order able spot problem prior bond confiscation suspension emergency measure auspices dynamic validator voting referendum instating possible validators referendum removal parachains altogether come referendum required substantial grace period allow orderly transition standalone chain consensus system grace period likely order months likely set perchain basis parachain registry order different parachains enjoy different grace periods according need 6 4 sealing relay blocks sealing refers essence process canonicalisation basic data transform maps original fundamentally singular meaningful pow chain sealing effectively synonym mining case involves collection signed statements validators validity availability canonicality particular relay chain block parachain blocks represents mechanics underlying bft consensus algorithm scope present work instead describe primitive assumes consensus creating state machine ultimately expect inspired number promising bft consensus algorithms core tangaora 9 bft variant raft 16 tendermint 11 honeybadgerbft 14 algorithm reach agreement multiple parachains parallel differing usual blockchain consensus mechanisms assume consensus reached able record consensus irrefutable proof provided participants assume misbehaviour protocol generally reduced small group containing misbehaving participants minimise collateral damage dealing punishment 8 proof takes form signed statements placed relay chain block xe2 x80 x99s header certain fields relay chain xe2 x80 x99s statetrie root transaction trie root sealing process takes place single consensus generating mechanism addressing relay chain xe2 x80 x99s block parachains xe2 x80 x99 blocks relay xe2 x80 x99s content parachains separately xe2 x80 x9ccommitted xe2 x80 x9d sub groups collated later results complex process relaychain allows complete entire system xe2 x80 x99s consensus single stage minimising latency allowing complex data availability requirements helpful routing process 8existing pos based bft consensus schemes tendermint bft original slasher fulfill assertions x0cpolkadot vision heterogeneous multi chain framework state participant xe2 x80 x99s consensus machine modelled simple 2 dimensional table participant validator set information form signed statements xe2 x80 x9cvotes xe2 x80 x9d participants parachain block candidate relaychain block candidate set information pieces data availability validator egress transaction post information block able properly validate parachain candidates following block vote 1 known 0 known vote 1 committed voting similarly rest process later votes respect grounds punishment validity parachain block valid externally referenced data e g transactions available relevant validators assigned parachain voting vote 1 valid 1 invalid 0 known vote non zero committed voting way rest process later votes respect grounds punishment validators submit votes votes resubmitted qualified rules progression consensus modelled multiple standard bft consensus algorithms parachain happening parallel potentially thwarted relatively small minority malicious actors concentrated single parachain group overall consensus exists establish backstop limiting worst case scenario deadlock merely void parachain blocks round punishment responsible basic rules validity individual blocks allow total set validators come consensus unique parachain candidate referenced canonical relay xe2 x80 xa2 thirds validators voting positively voting negatively xe2 x80 xa2 validators voting positively availability egress queue information positive negative vote validity exceptional condition created set validators vote determine malicious parties accidental fork aside valid invalid kind votes allowed equivalent voting meaning node conflicting opinions node xe2 x80 x99s owner running multiple implementations agree indicating possible ambiguity protocol votes counted validator set losing opinion small proportion parameterised half significantly votes winning opinion assumed accidental parachain fork parachain automatically suspended consensus process assume malicious act punish minority voting dissenting opinion draft 1 12 conclusion set signatures demonstrating canonicality relay chain block sealed process sealing block begun 6 5 improvements sealing relay blocks sealing method gives strong guarantees system xe2 x80 x99s operation scale particularly parachain xe2 x80 x99s key information availability guaranteed validators means validator xe2 x80 x99s responsibility footprint grows chains added data availability open consensus networks essentially unsolved problem ways mitigating overhead placed validator nodes simple solution realise validators shoulder responsibility data availability need actually store communicate replicate data secondary data silos possibly related collators compile data manage task guaranteeing availability validators providing portion interest income payment buy intermediate scalability doesn xe2 x80 x99t help underlying problem adding chains general require additional validators ongoing network resource consumption particularly terms bandwidth grows square chains untenable property long term ultimately likely bashing heads fundamental limitation states consensus network considered available safe ongoing bandwidth requirements order total validators times total input information inability untrusted network properly distribute task data storage nodes sits apart eminently distributable task processing 6 5 1 introducing latency means softening rule relax notion immediacy requiring 33% 1 validators voting availability eventually immediately better utilise exponential data propagation help peaks datainterchange reasonable equality unproven 1 latency participants xc3 x97 chains current model size system scales number chains ensure processing distributed chain require validator fix availability attestation constant proportion validators participants similarly grows number chains end 2 latency size2 meaning system grows bandwidth required latency availability known network characterised number blocks finality increases square substantial growth factor turn notable road blocker force xe2 x80 x9cnon flat xe2 x80 x9d paradigms composing xe2 x80 x9cpolkadotes xe2 x80 x9d hierarchy multi level routing posts tree relaychains x0cpolkadot vision heterogeneous multi chain framework 6 5 2 public participation possible direction enlist public participation process micro complaints system similar fishermen external parties police validators claim availability task find appears unable demonstrate availability lodge micro complaint validators pow staked bond mitigate sybil attack render system largely useless 6 5 3 availability guarantors final route nominate second set bonded validators xe2 x80 x9cavailability guarantors xe2 x80 x9d bonded normal validators taken set chosen long term period session unlike normal validators switch parachains form single group attest availability important interchain data advantage relaxing equivalence participants chains essentially chains grow original chain validator set participants specifically taking dataavailability testament remain sub linear possibly constant 6 5 4 collator preferences important aspect system ensure healthy selection collators creating blocks given parachain single collator dominated parachain attacks feasible likelihood lack availability external data obvious option artificially weight parachain blocks pseudo random mechanism order favour wide variety collators instance require consensus mechanism validators favour parachain block candidates determined xe2 x80 x9cheavier xe2 x80 x9d similarly incentivise validators attempt suggest weightiest block find xe2 x80 x94this making portion reward proportional weight candidate ensure collators given reasonable fair chance candidate chosen winning candidate consensus specific weight parachain block candidate determinate random function connected collator example taking xor distance measure collator xe2 x80 x99s address cryptographically secure pseudorandom number determined close point block created notional xe2 x80 x9cwinning ticket xe2 x80 x9d effectively gives collator specifically collator xe2 x80 x99s address random chance candidate block xe2 x80 x9cwinning xe2 x80 x9d mitigate sybil attack single collator xe2 x80 x9cmining xe2 x80 x9d address close winning ticket favourite block add inertia collator xe2 x80 x99s address simple requiring baseline funds address elegant approach weight proximity winning ticket funds parked address question modelling possible mechanism enables small stakeholders contribute collator draft 1 13 6 5 5 overweight blocks validator set compromised create propose block valid takes inordinate time execute validate problem validator group reasonably form block takes long time execute particular piece information known allowing short cut e g factoring large prime single collator knew information clear advantage getting candidates accepted long busy processing old block blocks overweight protection validators submitting validating blocks largely falls guise invalid blocks additional caveat time taken execute block status overweight subjective final outcome vote misbehaviour fall essentially camps possibility block definitely overweight xe2 x80 x94 case thirds declare execute block limit e g 50% total time allowed blocks block definitely overweight xe2 x80 x94this thirds declare execute block said limit final possibility fairly equal split opinion validators case choose proportionate punishment ensure validators predict proposing overweight block sensible require publish information performance block sufficient period time allow profile processing speed relative peers judging 6 5 6 collator insurance issue remains validators unlike pow networks check collator xe2 x80 x99s block validity actually execute transactions malicious collators feed invalid overweight blocks validators causing grief wasting resources exacting potentially substantial opportunity cost mitigate propose simple strategy validators firstly parachain block candidates sent validators signed relay chain account funds validator drop immediately secondly candidates ordered priority combination e g multiplication funds account cap number previous blocks collator successfully proposed past mention previous punishments proximity factor winning ticket discussed previously cap punitive damages paid validator case sending invalid block disincentivise collators sending invalid overweight block candidates validators validator place block transaction including offending block alleging misbehaviour effect transferring funds misbehaving collator xe2 x80 x99s account aggrieved validator type transaction runs ensure collator remove funds prior punishment funds transferred damages dynamic parameter x0cpolkadot vision heterogeneous multi chain framework modelled likely proportion validator block reward reflect level grief caused prevent malicious validators arbitrarily confiscating collators xe2 x80 x99 funds collator appeal validator xe2 x80 x99s decision jury randomly chosen validators return placing small deposit find validator xe2 x80 x99s favour deposit consumed deposit returned validator fined validator vaulted position fine likely hefty 6 6 interchain transaction routing interchain transaction routing essential maintenance tasks relay chain validators logic governs posted transaction shortened simply xe2 x80 x9cpost xe2 x80 x9d gets desired output source parachain non negotiable input destination parachain trust requirements choose wording carefully notably don xe2 x80 x99t require transaction source parachain explicitly sanctioned post constraints place model parachains provide packaged overall block processing output posts result block xe2 x80 x99s execution posts structured fifo queues number lists known routing base 16 notably number represents quantity parachains support having resort multi phase routing initially polkadot support kind direct routing outline possible multi phase routing process xe2 x80 x9chyper routing xe2 x80 x9d means scaling past initial set parachains assume participants know subgroupings blocks n n 1 summary routing system follows stages xe2 x80 xa2 collators contact members v alidators n s xe2 x80 xa2 collators subgroup s ensure 1 member v alidators n s contact xe2 x80 xa2 collators subgroup s assume egress n xe2 x88 x92 1 s s available incoming post data xe2 x80 x98s xe2 x80 x98 block xe2 x80 xa2 collators compose block candidate b s b header b ext b proof b receipt b egress xe2 x80 xa2 collators send proof information proof s b header b ext b proof b receipt v alidators n s xe2 x80 xa2 collators ensure external transaction data b ext available collators validators xe2 x80 xa2 collators subgroup s send egress information egress n s s b header b receipt b egress s receiving sub group xe2 x80 x99s members block v alidators n 1 s xe2 x80 xa2 v alidatorv pre connect set members block let n chain n 1 v connect validators v chain n 1 v n xe2 x80 xa2 v alidatorv collate data ingress block subgroup s retrieve egress n xe2 x88 x92 1 s chain n v validators v chain n v chain n v draft 1 14 possibly going randomly selected validators proof attempt xe2 x80 xa2 v alidatorv accept candidate proofs block proof chain n v vote block validity xe2 x80 xa2 v alidatorv accept candidate egress data block subgroup s accept egress n s n vote block egress availability republish interested validators v chain n 1 v chain n 1 v xe2 x80 xa2 v alidatorv consensus egress n f rom current egress queue information posts going parachain xe2 x80 x98from xe2 x80 x98 parachain xe2 x80 x98to xe2 x80 x98 block number xe2 x80 x98n xe2 x80 x98 collators collator parachain s v alidators n s set validators parachain s block number n conversely chain n v parachain validator v assigned block number n block egress egress queue posts parachain block block destination parachain collators collect transaction fees based blocks canonical incentivised ensure block destination subgroup xe2 x80 x99s members informed egress queue present block validators incentivised form consensus parachain block care little collator xe2 x80 x99s block ultimately canonical principle validator form allegiance collator conspire reduce chances collators xe2 x80 x99 blocks canonical difficult arrange random selection validators parachains defended reduction fees payable parachain blocks hold consensus process 6 6 1 external data availability ensuring parachain xe2 x80 x99s external data actually available perennial issue decentralised systems aiming distribute workload network heart issue availability problem states possible non interactive proof availability sort proof non availability bft system properly validate transition correctness relies availability external data maximum number acceptably byzantine nodes plus system attest data available system scale properly like polkadot invites problem constant proportion validators attest availability data assuming validators want actually store data asserting available avoid problem bandwidth storage requirements increasing system size number validators possible answer separate set validators availability guarantors order grows sublinearly size polkadot described 6 5 3 secondary trick group collators intrinsic incentive ensure data available chosen parachain unable author blocks collect transaction fees collators form group membership varied random nature parachain validator groups non trivial enter easy x0cpolkadot vision heterogeneous multi chain framework prove recent collators thousand blocks allowed issue challenges availability external data particular parachain block validators small bond validators contact apparently offending validator sub group testified acquire return data collator escalate matter testifying lack availability direct refusal provide data counts bond confiscating offence misbehaving validator likely drop connection contacting additional validators run test case collator xe2 x80 x99s bond returned quorum validators nonavailability testimonials reached released misbehaving sub group punished block reverted 6 6 2 posts routing parachain header includes egress trie root root trie containing routing base bins bin concatenated list egress posts merkle proofs provided parachain validators prove particular parachain xe2 x80 x99s block particular egress queue particular destination parachain beginning processing parachain block parachain xe2 x80 x99s egress queue bound said block merged block xe2 x80 x99s ingress queue assume strong probably cspr9 sub block ordering achieve deterministic operation offers favouritism parachain block pairing collators calculate new queue drain egress queues according parachain xe2 x80 x99s logic contents ingress queue written explicitly parachain block main purposes firstly means parachain trustlessly synchronised isolation parachains secondly simplifies data logistics entire ingress queue able processed single block validators collators able process following blocks having source queue xe2 x80 x99s data specially parachain xe2 x80 x99s ingress queue threshold end block processing marked saturated relay chain messages delivered cleared merkle proofs demonstrate fidelity collator xe2 x80 x99s operation parachain block xe2 x80 x99s proof 6 6 3 critique minor flaw relating basic mechanism post bomb attack parachains send maximum posts possible particular parachain ties target xe2 x80 x99s ingress queue damage standard transaction dos attack operating normally set synchronised non malicious collators validators n parachains n xc3 x97 m total validators l collators parachain break total data pathways block validator m xe2 x88 x921 l l m xe2 x88 x921 validators parachain set l collator providing candidate parachain block second l collator block requiring egress payloads previous block actually like worst case 9cryptographically secure pseudo random draft 1 15 operation likely collators share data collator m kn m connection relevant parachain block validator kn seeding egress payloads subset parachain validator group block possibly favoured collator s data path ways node grow linearly overall complexity system reasonable system scales hundreds thousands parachains communication latency absorbed exchange lower complexity growth rate case multi phase routing algorithm order reduce number instantaneous pathways cost introducing storage buffers latency 6 6 4 hyper cube routing hyper cube routing mechanism build extension basic routing mechanism described essentially growing node connectivity number parachains sub group nodes grow logarithm parachains posts transit parachains xe2 x80 x99 queues way final delivery routing deterministic simple begin limiting number bins ingress egress queues total number parachains routing base b fixed number parachains changes routing exponent e instead raised model message volume grows o pathways remaining constant latency number blocks required delivery o e model routing hypercube e dimensions cube having b possible locations block route messages single axis alternate axis round robin fashion guaranteeing worst case delivery time e blocks parachain processing foreign bound messages found ingress queue routed immediately appropriate egress queue xe2 x80 x99s bin given current block number routing dimension process necessitates additional data transfer hop delivery route problem mitigated alternative means data payload delivery including reference payload post post trie example hyper cube routing system 4 parachains b 2 e 2 phase 0 message m xe2 x80 xa2 sub0 mdest xe2 x88 x88 2 3 sendto 2 xe2 x80 xa2 sub1 mdest xe2 x88 x88 2 3 sendto 3 xe2 x80 xa2 sub2 mdest xe2 x88 x88 0 1 sendto 0 xe2 x80 xa2 sub3 mdest xe2 x88 x88 0 1 sendto 1 phase 1 message m xe2 x80 xa2 sub0 mdest xe2 x88 x88 1 3 sendto 1 xe2 x80 xa2 sub1 mdest xe2 x88 x88 0 2 sendto 0 xe2 x80 xa2 sub2 mdest xe2 x88 x88 1 3 sendto 3 xe2 x80 xa2 sub3 mdest xe2 x88 x88 0 2 sendto 2 dimensions easy bits destination index block higher order bit second block deals low order bit happen arbitrary order post routed x0cpolkadot vision heterogeneous multi chain framework 6 6 5 maximising serendipity alteration basic proposal fixed total c2 xe2 x88 x92 c validators c xe2 x88 x921 validators sub group block unstructured repartitioning validators parachains instead parachain sub group validator assigned unique different parachain sub group following block lead invariant blocks pairings parachain exists validators swapped parachain responsibilities gain absolute guarantees availability single validator occasionally drop offline benevolent nonetheless optimise general case approach complications addition parachain necessitate reorganisation validator set furthermore number validators tied square number parachains start initially small eventually grow far fast untenable 50 parachains fundamental problems case reorganisation validator sets regularly size validator set small multiple validators assigned parachain applying integer factor overall total validators multi phase routing mechanism hypercube routing discussed 6 6 4 alleviate requirement large number validators large number chains 6 7 parachain validation validator xe2 x80 x99s main purpose testify bonded actor parachain xe2 x80 x99s block valid including limited state transition external transactions included execution waiting posts ingress queue final state egress queue process fairly simple validator sealed previous block free begin working provide candidate parachain block candidate round consensus initially validator finds parachain block candidate parachain collator described co validators parachain block candidate data includes block xe2 x80 x99s header previous block xe2 x80 x99s header external input data included ethereum bitcoin data referred transactions principle include arbitrary data structures arbitrary purposes egress queue data internal data prove state transition validity ethereum state storage trie nodes required execute transaction experimental evidence shows dataset recent ethereum block kib simultaneously validator attempting retrieve information pertaining previous block xe2 x80 x99s transition initially previous block xe2 x80 x99s validators later validators signing availability data validator received candidate block validate locally validation process contained parachain class xe2 x80 x99s validator module consensus sensitive software module written implementation polkadot principle library c abi enable single library shared implementations appropriate draft 1 16 reduction safety coming having single xe2 x80 x9creference xe2 x80 x9d implementation process takes previous block xe2 x80 x99s header verifies identity recently agreed relay chain block hash recorded parent header xe2 x80 x99s validity ascertained specific parachain class xe2 x80 x99s validation function called single function accepting number data fields roughly given previously returning simple boolean proclaiming validity block validation functions check header fields able derived directly parent block e g parent hash number following populate internal data structures necessary order process transactions posts ethereum like chain amounts populating trie database nodes needed execution transactions chain types preparatory mechanisms ingress posts external transactions external data represents enacted balanced according chain xe2 x80 x99s specification sensible default require ingress posts processed external transactions serviced parachain xe2 x80 x99s logic decide enactment series egress posts created verified match collator xe2 x80 x99s candidate finally properly populated header checked candidate xe2 x80 x99s header fully validated candidate block validator vote hash header send requisite validation information co validators subgroup 6 7 1 parachain collators parachain collators unbonded operators fulfill task miners present day blockchain networks specific particular parachain order operate maintain relay chain fully synchronised parachain precise meaning xe2 x80 x9cfully synchronised xe2 x80 x9d depend class parachain include present state parachain xe2 x80 x99s ingress queue ethereum xe2 x80 x99s case involves maintaining merkle tree database blocks include data structures including bloom filters account existence familial information logging outputs reverse lookup tables block number addition keeping chains synchronised xe2 x80 x9cfish xe2 x80 x9d transactions maintaining transaction queue accepting properly validated transactions public network queue chain able create new candidate blocks validators chosen block identity known relaychain synchronised submit ancillary information proof validity peer network trouble collects fees relating transactions includes economics float arrangement heavily competitive market surplus collators possible transaction fees shared parachain validators incentivise inclusion particular collator xe2 x80 x99s block similarly x0cpolkadot vision heterogeneous multi chain framework collators raise required fees need paid order block attractive validators case natural market form transactions paying higher fees skipping queue having faster inclusion chain 6 8 networking networking traditional blockchains like ethereum bitcoin simple requirements transactions blocks broadcast simple undirected gossip synchronisation involved especially ethereum reality logic contained peer strategy protocol resolved request answer message types ethereum progress current protocol offerings devp2p protocol allowed subprotocols multiplexed single peer connection peer overlay support p2p protocols simultaneously ethereum portion protocol remained relatively simple p2p protocol remains unfinished important functionality missing qos support sadly desire create ubiquitous xe2 x80 x9cweb 3 xe2 x80 x9d protocol largely failed projects explicitly funded ethereum crowd sale requirements polkadot substantial wholly uniform network polkadot types participants different requirements peer makeup network xe2 x80 x9cavenues xe2 x80 x9d participants tend converse particular data means substantially structured network overlay xe2 x80 x94and protocol supporting xe2 x80 x94 likely necessary furthermore extensibility facilitate future additions new kinds xe2 x80 x9cchain xe2 x80 x9d require novel overlay structure depth discussion networking protocol look outside scope document requirements analysis reasonable roughly break network participants sets relay chain parachains subsets state parachain participants interested conversing opposed participants parachains xe2 x80 xa2 relay chain participants xe2 x80 xa2 validators p split subsets p s parachain xe2 x80 xa2 availability guarantors represented validators basic form protocol xe2 x80 xa2 relay chain clients m note members parachain set tend members m xe2 x80 xa2 parachain participants xe2 x80 xa2 parachain collators c 0 c 1 xe2 x80 xa2 parachain fishermen f 0 f 1 xe2 x80 xa2 parachain clients s 0 s 1 xe2 x80 xa2 parachain light clients l 0 l 1 general particular classes communication tend place members sets xe2 x80 xa2 p p set validators guarantors connected achieve consensus xe2 x80 xa2 p s c s p s validator member given parachain group tend gossip members collators xe2 x80 xa2 xe2 x80 xa2 xe2 x80 xa2 xe2 x80 xa2 xe2 x80 xa2 xe2 x80 xa2 draft 1 17 parachain discover share block candidates p s c availability guarantor need collect consensus sensitive cross chain data validators assigned collators optimise chance consensus block advertising availability guarantors data disbursed guarantor facilitate consensus p s p s parachain validators need collect additional input data previous set validators availability guarantors f s p reporting fishermen place claim participant m m p general relay chain clients disburse data validators guarantors s s s s p s parachain clients disburse data validator guarantors l s l s s s parachain light clients disburse data clients ensure efficient transport mechanism xe2 x80 x9cflat xe2 x80 x9d overlay network xe2 x80 x94like ethereum xe2 x80 x99s devp2p xe2 x80 x94where node non arbitrarily differentiate fitness peers unlikely suitable reasonably extensible peer selection discovery mechanism likely need included protocol aggressive planning lookahead ensure right sort peers xe2 x80 x9cserendipitously xe2 x80 x9d connected right time precise strategy peer different class participant properly scaled multi chain collators need continuously reconnecting accordingly elected validators need going agreements subset validators ensure disconnected vast majority time useless validator collators naturally attempt maintain stable connections availability guarantor set ensure swift propagation consensus sensitive data availability guarantors aim maintain stable connection validators consensus consensus critical parachain data attest collators parachain data fishermen clients dispersing information validators tend look validators especially sub group collators supply parachain block candidates fishermen general relay chain parachain clients generally aim connection open validator guarantor plenty nodes similar parachain light clients similarly aim connected client parachain parachain light clients 6 8 1 problem peer churn basic protocol proposal subsets constantly alter randomly block validators assigned verify parachain transitions randomly elected problem disparate non peer nodes need pass data rely fairly distributed connected peer network x0cpolkadot vision heterogeneous multi chain framework ensure hop distance worst case latency grows logarithm network size kademlia like protocol 13 help introduce longer block times allow necessary connection negotiation place peer set reflects node xe2 x80 x99s current communication needs great solutions long block times forced network render useless particular applications chains perfectly fair connected network result substantial wastage bandwidth scales uninterested nodes having forward data useless directions form solution reasonable optimisation help minimise latency restrict volatility parachain validator sets reassigning membership series blocks e g groups 15 4 second block time mean altering connections minute rotating membership incremental fashion e g changing member time e g 15 validators assigned parachain average minute completely unique sets limiting peer churn ensuring advantageous peer connections advance partial predictability parachain sets help ensure node permanently serendipitous selection peers 6 8 2 path effective network protocol likely effective reasonable development effort focus utilising pre existing protocol rolling peer peer base protocols exist use augment including ethereum xe2 x80 x99s devp2p 22 ipfs xe2 x80 x99s libp2p 1 gnu xe2 x80 x99s gnunet 4 review protocols relevance building modular peer network supporting certain structural guarantees dynamic peer steering extensible sub protocols scope document important step implementation polkadot 7 practicalities protocol 7 1 interchain transaction payment great freedom simplicity gained dropping need holistic computation resource accounting framework like ethereum xe2 x80 x99s gas raise important question gas parachain avoid parachain forcing computation rely transaction post ingress queue buffers prevent chain spamming transaction data equivalent mechanism provided protocol prevent spamming transaction processing problem left higher level chains free attach arbitrary semantics incoming transaction post data ensure computation paid started similar vein model espoused ethereum serenity imagine xe2 x80 x9cbreak xe2 x80 x9d contract parachain allows validator guaranteed payment exchange provision particular volume processing resources resources measured like gas entirely novel model subjective time execute bitcoin like flat fee model draft 1 18 isn xe2 x80 x99t useful readily assume chain caller available value mechanism recognised break contract imagine secondary xe2 x80 x9cbreakout xe2 x80 x9d contract source chain contracts form bridge recognising providing value equivalence staking tokens available settle balance payments calling chain mean proxying bridge provide means negotiating value transfer chains order pay computation resources required destination parachain 7 2 additional chains addition parachain relatively cheap operation free parachains means fewer validators parachain eventually larger number validators reduced average bond issue smaller coercion cost attacking parachain mitigated fishermen growing validator set essentially forces higher degree latency mechanics underlying consensus method furthermore parachain brings potential grief validators burdensome validation algorithm xe2 x80 x9cprice xe2 x80 x9d validators stake holding community extract addition new parachain market chains possibly addition xe2 x80 xa2 chains likely zero net contribution paying terms locking burning staking tokens e g consortium chains doge chains app specific chains xe2 x80 xa2 chains deliver intrinsic value network adding particular functionality difficult e g confidentiality internal scalability service tie ins essentially community stakeholders need incentivized add child chains xe2 x80 x94either financially desire add featureful chains relay envisioned new chains added short notice period removal allowing new chains experimented risk compromising medium long term value proposition 8 conclusion outlined direction author scalable heterogeneous multi chain protocol potential backwards compatible certain pre existing blockchain networks protocol participants work enlightened self interest create overall system extended exceptionally free manner typical cost existing users comes standard blockchain design given rough outline architecture including nature participants economic incentives processes engage identified basic design discussed strengths limitations accordingly directions ease limitations yield ground fully scalable blockchain solution x0cpolkadot vision heterogeneous multi chain framework 8 1 missing material open questions network forking possibility divergent implementations protocol recovery exceptional condition discussed given network necessarily non zero period finalisation large issue recover relaychain forking require careful integration consensus protocol bond confiscation conversely reward provision deeply explored present assume rewards provided winner takes basis best incentivisation model fishermen shortperiod commit reveal process allow fishermen claim prize giving fairer distribution rewards process lead additional latency discovery misbehaviour 8 2 acknowledgments thanks proof readers helped vaguely presentable shape particular peter czaban bjo xcc x88rn wagner ken kappler robert habermeier vitalik buterin reto trinkler jack petersson thanks people contributed ideas beginnings thereof marek kotewicz aeron buchanan deserve especial mention thanks help way errors portions work including initial research consensus algorithms funded british government innovate uk programme references 1 specs libp2p associated submodules https github com libp2p specs 2 webassembly http webassembly org 2016 3 adam matt corallo luke dashjr mark friedenbach gregory maxwell andrew miller andrew poelstra jorge timon pieter wuille enabling blockchain innovations pegged sidechains 2014 4 krista bennett christian grothoff tzvetan horozov ioana patrascu tiberiu stef gnunet truly anonymous networking infrastructure proc privacy enhancing technologies workshop pet citeseer 2002 draft 1 19 5 vitalik buterin ethereum generation smart contract decentralized application platform https github com ethereum wiki wiki white paper 2013 6 vitalik buterin ethereum 2 0 mauve paper 2016 7 vitalik buterin serenity poc2 2016 8 nxt community whitepaper nxt http wiki nxtcrypto org wiki whitepaper nxt 2013 9 christopher copeland hongxia zhong tangaroa byzantine fault tolerant raft http www scs stanford edu 14au cs244b labs projects copeland zhong pdf 2016 10 ethan buchman jae kwon cosmos network distributed ledgers https github com cosmos cosmos blob master whitepaper md 2016 11 jae kwon tendermint consensus mining http tendermint com docs tendermint pdf 2014 12 daniel larimer bitshares http docs bitshares org bitshares history html 2013 13 petar maymounkov david mazie xcc x80res kademlia peerto peer information system based xor metric iptps xe2 x80 x9901 revised papers international workshop peer peer systems pages 53 xe2 x80 x9365 2002 14 andrew miller yu xia kyle croman elaine shi dawn song honey badger bft protocols technical report cryptology eprint archive 2016 199 2016 15 satoshi nakamoto bitcoin peer peer electronic cash system https bitcoin org bitcoin pdf 2008 16 diego ongaro john ousterhout search understandable consensus algorithm 2014 usenix annual technical conference usenix atc 14 pages 305 xe2 x80 x93319 2014 17 parity parity ethereum client https parity io 2016 18 serguei popov tangle https www iotatoken com iota whitepaper pdf 2016 19 youcai qian randao https github com randao randao 2015 20 eli ben sasson alessandro chiesa christina garman matthew green ian miers eran tromer madars virza zerocash decentralized anonymous payments bitcoin 2014 ieee symposium security privacy pages 459 xe2 x80 x93474 ieee 2014 21 paul snow brian deery jack lu david johnston peter kirb factom business processes secured immutable audit trails blockchain https raw githubusercontent com factomproject factomdocs master factom whitepaper pdf 2014 22 gavin wood devp2p wire protocol https github com ethereum wiki wiki libp2p whitepaper 2014 23 gavin wood ethereum secure decentralised generalised transaction ledger http gavwood com paper pdf 2014 24 gavin wood yellow paper committee https github com gavofyork curly engine 2016 appendix functional components seen high level parity polkadot platform stack number functional components development require substantial research development prior completed components dependent existing independent important platform function properly nice haves indeterminate complexity deemed feasible relatively straight forward xe2 x80 x99ll try list components possible fit development roadmap networking subsystem means peer network formed maintained simple alterations existing peer peer networking libraries devp2p likely sufficient initial system additional research development necessary ensure network grows network topology increasingly structured allowing optimal data logistics final deployment adaptations libp2p devp2p gnunet considered requirements likely met new protocol considered consensus mechanism proof authority consensus mechanism supporting rich validator statements allowing multiple independent items agreed single series based subjective reception partial set validator statements mechanism allow proof misbehaviour dismissal malicious validators need involve staking mechanism substantial research prototyping precede development component proof stake chain extending consensus mechanism proof stake territory module includes staking tokens managing entry exit validator pool market mechanism determining validator rewards finalising approval voting nomination mechanism managing bond confiscation dismissal includes substantial research prototyping prior final development x0cpolkadot vision heterogeneous multi chain framework draft 1 20 parachain implementation parachain implementation likely based heavily existing blockchain protocol bitcoin likely provides rich transactions ethereum include integration proof stake chain allowing parachain gain consensus internal consensus mechanism transaction processing subsystem evolution parachain relay chain allow transactions sent received propagated includes designs transaction queuing optimised transaction routing network layer transaction routing subsystem introduces specifics relay chain xe2 x80 x99s behaviour initially adding transactability parachains needed following parachains hard coded relay chain include management ingress egress queues eventually develop network protocol means directed transaction propagation ensuring independent parachain collators overly exposed transactions interest relay chain final stage relay chain allowing dynamic addition removal emergency pausing parachains reporting bad behaviour includes implementation xe2 x80 x9cfisherman xe2 x80 x9d functionality independent collators delivery alternative chain specific collator functionality includes proof creation collators parachain misbehaviour detection fishermen validation function validators includes additional networking required allow discover communicate network dynamics modelling research overall dynamics protocol researched thoroughly happen offline network modelling empirical evidence simulated nodes dependent relay chain include development structured logging protocol allowing nodes submit detailed reports actions central hub collation network intelligence complex decentralised multi party network network intelligence hub similar http ethstats net needed monitor life signs network flag potentially disruptive behaviour structured logging generate visualise data real time maximum efficiency dependent relay chain reasonably complete state information publication platform mechanism publishing data relating blockchain effectively means decentralised content discovery network initially handled basic peer peer lookups deployment likely require structured robust solution availability critical piece information ipfs integration sensible means achieving goals javascript interaction bindings main means interacting network likely follow example ethereum high quality javascript bindings critical bindings cover interactions relay chain initial parachain depends governance initially meta protocol relay chain managing exceptional events hard forks soft forks protocol reparameterisation include modern structure help manage conflict prevent live lock ultimately meta protocol layer able enact changes normally reserved hard forks requires relay chain interaction platform platform xe2 x80 x9ctypical xe2 x80 x9d users able interact system minimal functionality facilitate common tasks entering bond process voting nomination validator fisherman collator staking token transfer depends having functional relay chain light clients light client technology relay chain parachains developed allow clients able gain information activity chains high degree trust freedom substantial requirement storage bandwidth depends relay chain parachain ui multi chain multi token wallet identity management system requires light client technology interaction platform needed initial network deployment chain dapp services services need deployed initial parachains registration hubs apis names natural language specifications code depends parachain strictly needed initial network deployment application development tools includes bits software required help developers examples include compilers key management tools data archivers vm simulators exist need developed required technologies chosen partly minimise need tools strictly required ethereum parachain trust free bridge ethereum allowing posted transactions routed parachains ethereum treated like transaction external origin allow ethereum contracts able post transactions parachains accounts initially modelled ascertain feasibility structural limitations based number validators required consensus process component dependent proof concept built following final development dependent relay chain bitcoin rpc compatibility layer simple rpc compatibility layer relay chain allowing infrastructure built protocol interoperable polkadot minimise effort support stretch goal requiring relay chain x0cpolkadot vision heterogeneous multi chain framework draft 1 21 web 2 0 bindings bindings common web 2 0 technology stacks facilitate usage polkadot infrastructure legacy systems stretch goal dependent initial parachains chain infrastructure exposed zk snark parachain example parachain utilising properties zk snarks order ensure identities transactors kept private stretch goal dependent relay chain encrypted parachain example parachain keeps item state encrypted signed ensure enforcement access controls inspection modification data allowing commercial regulated operations conform necessary include proof authority mechanisms allow polkadot validators guarantee degree correctness state transitions gaining exposure underlying information stretch goal depending relay chain trust free bitcoin bridge trust free bitcoin xe2 x80 x9ctwo way peg xe2 x80 x9d functionality possibly use threshold signatures alternatively n m multi signature bitcoin account spv proofs specialised fishermen development predicated initial feasibility analysis giving favourable result additional functionality need added unlocked bitcoin protocol support functionality abstract low level decentralised applications trust free token exchange asset tracking infrastructure crowdsale infrastructure contract language certainly integral project nice stretch goal nonetheless include safe contract language tutorials guidelines educational tools include means making formal proofs original solidity language vision based programming paradigm helps minimise critical process errors functional programming conditionorientated programming ide based contract language facilitate editing collaboration publication debugging contracts parachains far stretch goal appendix b frequently asked questions polkadot designed replace insert blockchain goal polkadot provide framework new blockchains created existing blockchains communities desire transitioned polkadot designed replace insert crypto currency polkadot tokens intended designed currency bad currency remain illiquid staking system liquid face substantial fees transfer ownership purpose polkadot tokens direct representation stake polkadot network inflation rate polkadot staking tokens polkadot staking token base expansion unlimited rises lowers according market effects order target particular proportion tokens held long term bond validation process staking token ownership reflect stakeholding mechanism realised fact underpin network xe2 x80 x99s security value tied overall economic value polkadot provides actors gain overall value polkadot operating correctly incentivised ensure continues best means validation process generally implies ownership staking tokens x0c