b wot city decentralized internet things software framework peer peer interoperable iot device jollen chen january 5 2017 wot city open source project jollen wotcity com abstract recent years development internet things iot applications increasingly complex studies attempted address problem common characteristic studies ability stream data cloud web software architectures presented studies provide iot interoperability openiot platform provide interoperable iot applications 1 notwithstanding studies methods provide peer peer networking paper proposes software architecture provides peer peer iot networking interoperable iot application framework software architecture provides flow based programming environment writing iot applications keywords internet things interoperability peer peer web things flow based decentralized 1 introduction motivation paper propose new design software architecture development interoperable internet things iot applications software architecture adopts w3c xe2 x80 x99s web things wot ontology addition software architecture provides peer peer networking capabilities decentralized iot model paper presents overview wot city software framework software framework currently available open source project consists sub projects accessible wotcity io https github com wotcity b devify io https github com devifyplatform c flowchain io https github com flowchain given javascript xe2 x80 x99s current ubiquitous nature natural use javascript platform iot wot city offers 100% javascript platform iot x0c2 architectural description w3c xe2 x80 x99s wot ontology provides standards based model represent physical device called physical object application server 2 iot application server comprises virtual representation physical object application runs application server iot device iot application installed run application processor based high performance device microcontroller device typically node js javascript runtime high performance devices javascript engines mongoose stack iot platform 3 jerryscript 4 microcontroller based resource constrained devices fig 1 architectural design wot city framework shown fig 1 wot city stack software framework layer design layer responsible dealing http coap websocket communication protocol layer describes iot device properties layer uses wot model accordingly physical device represented virtual thing protocols binding b url routing c event emitting d request handler functionalities broker server layer implements peer peer communication rest style rpc operations distributed hash table dht code size broker server layer extremely light weight run laptops mobile devices resource constrained devices aims help wot layer create iot application servers begin developing customized iot application servers project boilerplates downloaded wot city open source project x0can iot application typically uses flow based programming fbp paradigm fbp paradigm defines applications networks black box processes exchange data predefined connections message passing 5 application layer offers fbp environment addition fbp naturally component oriented wot city xe2 x80 x99s light weight fbp engine applications assembled predefined components connect data processing networks fig 2 wot city framework components figure 2 shows software components wot city framework wot use case open markets applications services based roles web technologies manages physical device xe2 x80 x9cvirtual thing thing properties xe2 x80 x9d implement model xe2 x80 x9cthing description xe2 x80 x9d component wot city framework describes xe2 x80 x9cthing properties xe2 x80 x9d json data format consequently wot represents virtual thing uri convention shown listing 1 url router component wot city framework defines uris represent virtual thing listing 1 virtual thing uri convention coap ws hostname object send coap ws hostname object viewer x0ca virtual thing referred xe2 x80 x9cnode xe2 x80 x9d paper wot city framework coap websocket primary protocol bindings node coap application layer protocol intended applications constrained devices websocket protocol provides standardized way facilitate realtime data transfer shown listing 1 uris represent types nodes e sender viewer nodes sender node transfers time series data node websocket coap viewer node receives time series data nodes addition request handlers component accepts incoming requests receives data triggers necessary events wot layer makes distribution possible providing service contract exposing server implementation details 6 addition broker server layer encapsulates peer peer rpc technical details device server typically broker architectural pattern utilized structure distributed software systems decoupled components interact remote service invocations 7 broker server layer implements broker architectural pattern hide technical details 3 peer peer network mqtt frequently referenced iot technology publish subscribe based lightweight messaging protocol use tcp ip mqtt networks connected nodes managed mqtt brokers addition mqtt brokers export nodes external visibility note wot city framework xe2 x80 x99s broker server export nodes shown fig 3 wot city networks nodes connected broker xe2 x80 x9cgrouped xe2 x80 x9d broker virtual node e virtual node comprises broker corresponding nodes manner broker responsible managing connected nodes brokers organized peer peer networ dht unlike mqtt wot city broker export nodes hides nodes nodes internal visible externally shown fig 2 dht chord p2p protocol key components peer peer networks addition web web rpc wwrpc exists key component wot city framework wwrpc component offers rest style rpc operations collaborates dht result enable capabilities device wot city application server installed writing wot city broker server simple shown listing 2 broker server starts subsequently joins peer peer network x0cfig 3 wot city framework network topology listing 2 sample broker program code require broker class devify platform var devifybroker require xe2 x80 x98devify io xe2 x80 x99 broker instantiate broker server instance var broker new devifybroker host xe2 x80 x98192 168 0 1 xe2 x80 x99 port 8000 join address xe2 x80 x98192 168 0 100 xe2 x80 x99 port 8000 start broker server broker start virtual node listening broker server offers periodic health failure checks nodes mentioned previously broker hides implementation details shown fig 4 broker server forward request xe2 x80 x9cendpoint xe2 x80 x9d ordinarily endpoint cloud based rest api platform dropbox twilio broker server shown fig 2 chord p2p protocol component implements chord peer peer protocol chord protocol algorithm peer peer dht x0cfig 4 example request forwarding dht stores key value pairs assigning keys different nodes 8 chord messages sent peer nodes wwrpc dispatcher component receives dispatches rpc messages significant design wwrpc dispatcher component uses event driven concurrency model handle rpc messages currently developers avoid multi thread model employ event driven approach concurrency management 9 consequently scalability limits threads wwrpc uses event driven model 4 iot applications wot city presents software framework simplifies creation iot applications reusing existing web technologies applying fbp programming paradigm example setting sensor node gather information communicate nodes requires lines code build complete peer peer decentralized iot network requires lines code fbp paradigm defines applications networks exchanges data predefined connections 10 wot city utilizes fbp paradigm iot application development wot city software framework write flow based iot applications developers write iot application code fbp paradigm javascript fbp paradigm iot application described components corresponding connections shown fig 5 x0cfig 5 flowchain fbp runtime engine application described xe2 x80 x9cgraph xe2 x80 x9d json format listing 3 shows implementation listing 3 flowchain application sample xe2 x80 x9cgraph xe2 x80 x9d xe2 x80 x9ctype xe2 x80 x9d xe2 x80 x9ccoapbroker xe2 x80 x9d xe2 x80 x9cconnections xe2 x80 x9d xe2 x80 x9cupproc xe2 x80 x9d xe2 x80 x9cio devify sms xe2 x80 x9cupport xe2 x80 x9d xe2 x80 x9cout xe2 x80 x9d xe2 x80 x9cdownproc xe2 x80 x9d xe2 x80 x9cio devify console xe2 x80 x9cdownport xe2 x80 x9d xe2 x80 x9cin xe2 x80 x9d flowchain internal fbp like system 100% javascript unidirectional data flow design consequently flowchain single output port single input port unidirectional data flow reduces complexity device interoperability xe2 x80 x9cconnection xe2 x80 x9d created xe2 x80 x9coutport xe2 x80 x9d component xe2 x80 x9cinport xe2 x80 x9d component flowchain runtime engine responsible executing xe2 x80 x9cgraph xe2 x80 x9d processing data flow fbp components highly decoupled developers build publish reusable components 5 conclusions mission wot city establish open source project decentralized iot software framework furthermore wot city convergences emerging iot trends stack javascript software framework b device interoperability rest style rpc operations c peer peer network decentralized iot model d fbp model iot applications work available github open source projects fig 6 x0cfig 6 wot city open source project subsequently iot devices decentralized iot network require new model exchange data data exchange model secure ensure data privacy wot city begun build blockchain based decentralized iot platform future work given blockchain xe2 x80 x99s private ledger nature natural wot city use blockchain technology provide secured trusted data exchange words wot city use blockchain technology maintain trusted records data exchanged devices exchanging data centralized iot platform 6 references 1 soldatos john et al openiot open source internet things cloud pro ceedings international workshop interoperability open source solutions internet things pp 13 25 springer 2015 2 dave raggett introduction web things framework https www w3 org 2015 05 wot framework pdf 3 mongoose stack iot platform https mongoose iot com 4 ultra lightweight javascript engine internet things https github com samsung jerryscript 5 flow based programming https en wikipedia org wiki flow based programming x0c6 web things interest group charter https www w3 org 2014 12 wot ig charter html 7 buschmann frank et al pattern oriented software architecture john wiley sons ltd 1996 8 stoica morris et al chord scalable peer peer lookup service internet applica tions acm sigcomm computer communication review 31 4 149 9 welsh m culler et al seda architecture conditioned scalable inter net services proc 18th symposium operating systems principles sosp 18 banff canada 2001 10 j paul morrison data stream linkage mechanism ibm systems journal vol 17 4 1978 x0c