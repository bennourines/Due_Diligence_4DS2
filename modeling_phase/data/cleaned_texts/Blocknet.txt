b blocknet design specification arlyn culwick dan metcalf contributions alex koch blocknet core team x0ctable contents version control 3 introduction 4 releasing document 4 contributors welcome 4 opportunity 5 blocknet 5 pain point 5 solution 6 design 7 design objectives 7 architecture 9 core components 14 core services 18 blockchain components 25 blockchain services 26 project phases 37 production mvp 37 phase 2 38 phase 3 38 phase 4 38 technical specification 39 message sequences 39 api reference 39 use cases 40 document version 1 0 15 march 2018 page 2 42 x0cversion control date version number contributor comments 2016 08 27 0 1 arlyn culwick initial conceptual sketches 2017 05 18 0 2 arlyn culwick draft 2017 10 26 0 3 arlyn culwick modified structure conceptual clarity 2018 01 20 0 4 arlyn culwick removed low level documentation improved focus 2018 03 07 0 5 arlyn culwick 2018 03 09 0 6 arlyn culwick articulated design space blockchain routing rewrote organised material service nodes completed draft service node material completed protocol sketch order system added section order matching system drafted protocol sketch order history 2018 03 11 0 7 arlyn culwick added registry service section minor edits 2018 03 11 0 8 hanni abu copy editing correction typographical errors 2018 03 12 0 9 alex koch added use cases inter chain infrastructure 2018 03 15 1 0 arlyn culwick final signoff public version document version 1 0 15 march 2018 page 3 42 x0cintroduction document intended nontechnical developer audience provided reader general understanding blockchain blocknet xe2 x80 x99s design architecture introduced largely nontechnical way aid diagrams step step exposition inter chain services inter chain infrastructure service provide minimum increasing frequency document progresses discussion turns inter chain services like specifications blocknet combining matters design implementation integration intended result systematic design specification blocknet releasing document believe better way design solutions communicate gain insights work multiple perspectives believe keeping work private stand gain enormously people xe2 x80 x99s engagement code thirdly infrastructural project paramount importance engage use build technology concerned perceived risk competitors copy work gain advantage especially design market achieve major traction combined insights crypto enterprise architecture communities resource afford isolated risk reward ratio leaves unconcerned contributors welcome blocknet company exclusive team infrastructure believe infrastructure ought publicly owned freely available document currently draft final design fact notion final design clear place project practices continuous development welcome contributions discussion document blocknet xe2 x80 x99s code open source contribute blocknet project project stands benefit variety perspectives skills come bear design implementation welcome collaboration variety contact blocknet email contact blocknet co document version 1 0 15 march 2018 page 4 42 x0copportunity blocknet blocknet infrastructure coming xe2 x80 x9cinter blockchain era xe2 x80 x9d emerging technology epoch characterised primarily superseding current api ecosystem decentralized intrinsically monetized xe2 x80 x9ctoken ecosystem xe2 x80 x9d occur enabling technologies specifically smart contracts xe2 x80 x9cdapps xe2 x80 x9d mature point possessing practical inter blockchain interoperability time writing blocknet technological leader provision inter chain infrastructure use dapps smart contracts believe emergence inter blockchain era disruptive implications sectors software service practical blockchain usability perspective software service saas token ecosystem embodies fundamental advancements comparatively frictionless monetisation digital services b leveraging unique robustness decentralization security properties blockchain technology perspective blockchain technology blockchains achieve true potential broad generic interoperability blockchain services required inter chain interoperability blockchain based services deliver services confines limited customer base runs nodes sacrifice unique security properties blockchains delivering centralized entities b face enduring problems chain bloat relatedly market related pressure build features single chain creating xe2 x80 x9cinternet blockchains xe2 x80 x9d blocknet positioned enable frictionless monetisation apis empower blockchain technology converting thousands isolated chains token ecosystem pain point traditional internet based services faced perennial insecurity technology stack furthermore typically require centralization functions data placing high trust burden customers contrast blockchain technologies enable exploit cryptographic proofs deliver xe2 x80 x9ctrustless xe2 x80 x9d services participating entity prove certitude given outcome radically reduce trust required business party systematically enlarges range ways business enables new business models provide clearly defined security guarantees lowering costs better protecting brand value blockchains immediately achieve true potential primary reason interoperable thousands blockchains existence currently function like lans disconnected internet create circumstances foster era defining disruption generic interconnectivity brings xe2 x80 x93 scale similar internet enabled emergence facebook google document version 1 0 15 march 2018 page 5 42 x0csolution blocknet foundational infrastructure token ecosystem provides true peer peer interoperability nodes different blockchains order enable following delivery potentially kind digital service node blockchain ability given blockchain service function xe2 x80 x9cappcoin xe2 x80 x9d xe2 x80 x9cprotocol service xe2 x80 x9d consumable dapp blockchain open ended purposes instead purposes creators xe2 x80 x99 dapp greatly enlarging service xe2 x80 x99s market reach revenue stream ability smart contracts xe2 x80 x99 tokens function merely monetise xe2 x80 x9cdapps xe2 x80 x9d xe2 x80 x9cprotocol tokens xe2 x80 x9d logically placing layer lower technology stack potential utility greater order magnitude additionally services xe2 x80 x99 code quality benefit broad contributor base developers diverse communities exploit combined learnings prevent chain bloat code duplication save labourtime deliver services entire blockchain consuming market instead set users blockchain ability dapps simple orchestrations inter chain services instead difficult hand coded creations ground primary development tasks api integrations difficult highly specialised role coding new xe2 x80 x9cbulletproof xe2 x80 x9d smart contracts building dapps microservices architecture blockchain deliver single service integrated modular fashion providing simpler component design easier bug fixing easier upgrading ability effectively bypass currently difficult matter choosing blockchain build xe2 x80 x93 start project later points lifecycle microservices better implemented different blockchain monetisation inter chain multi chain services intrinsic tokens value exploitation new cryptoeconomically driven business models ushered blockchain technology example businesses extract value xe2 x80 x9cbetter free xe2 x80 x9d model monetary policy directly icos transaction fees deflationary economics block rewards superblock self funding systems marketplace monetized apis blocknet shall achieve architectural protocol based approach documentation subject paper document version 1 0 15 march 2018 page 6 42 x0cdesign design objectives following features shall designed descending order priority 1 interoperability foremost blocknet inter blockchain infrastructure direct design objective shall interoperability overwhelming majority existing future blockchain implementations additionally shall interoperable centralized entities order traditional server based services available token ecosystem 2 decentralization decentralized essentially entity exercise control entities system example bitcoin xe2 x80 x99s major achievement xe2 x80 x93 broad terms xe2 x80 x93 decentralization money entity controls currency xe2 x80 x99s value b transferral funds c keeping records account d monetary policy bitcoin currently exists ecosystem largely centralized nullifying benefits practice little value offer centralized ecosystem delivery decentralized services exists form api ecosystem b property interest decentralization largely lost servicedelivery example buys bitcoin centralized exchange purchase xe2 x80 x9ctrustless xe2 x80 x9d trust exchange purchase subject usual friction traditional payment infrastructure bank fees delays payment gateway fees visa mastercard fees fraud risk kyc requirements requirement trust intermediaries xe2 x80 x99s money personal information forth order bitcoin decentralized technology achieve potential decentralized ecosystem required entities business compromise technologies xe2 x80 x99 disruptive power 3 security decentralized monetary services characteristically require high security high determinacy operation level comparable aeronautical applications generally possible alter offline service runs edges network users xe2 x80 x99 devices b money found stealable system subject central rectification quickly lose value reasons blocknet requires highest level security determinacy operation 4 trustless service delivery context blockchains frequent desirable consequence decentralization necessary trust counterparty act honestly course transaction example bitcoin need trust middleman transfer funds recipient report honestly payment received middleman involved counterparties independently verify payment xe2 x80 x99s status extremely high degree confidence case inter chain service delivery equal degree xe2 x80 x9ctrustlessness xe2 x80 x9d required payments services blockchains order service rendered paid requiring participants act honestly preserving unique feature blockchain based payments inter chain context document version 1 0 15 march 2018 page 7 42 x0c5 simple integration coding required maximize interoperability reduce friction integration blocknet access token ecosystem shall require modification stock wallets nodes note consumption party service leverages blocknet delivery require coding use blocknet shall 6 decentralized integration maximize security foster open internet style ecosystem integration blocknet access token ecosystem shall require mediation central entity deliver consume services blocknet consumers shall required use blocknet xe2 x80 x99s blockchain b use specific service c use service centralizing effect xe2 x80 x9ccentralizing xe2 x80 x9d taken denote range scenarios control central agent sidechains style centralization networks network describe xe2 x80 x9cinter chain centralized xe2 x80 x9d note consumption party service delivered blocknet require mediation central party use blocknet shall 7 composability far possible blocknet shall built composability modularity mind pattern inter chain microservices envisaged specifically key principles microservice design maximise composability mindful services consumed order avoid building xe2 x80 x9cdistributed monolith xe2 x80 x9d preserved unchanged context token ecosystem 8 monetisability token ecosystem additional key principle added principle composability service intrinsically monetizable suggest bundled monetizable service xe2 x80 x99s api people run service xe2 x80 x99s nodes lack reason xe2 x80 x99d able derive revenue stream furthermore service xe2 x80 x99s revenue stream required secured trustless protocol cryptoeconomic incentives value likely captured monetisability question consumer service willing pay question unable forcibly consume free blocknet shall monetise core services feasible offer free shall provide means services delivered blocknet monetized securely 9 mobility small footprints scenarios mobile apps embedded iot devices insurance health supply chain agriculture automotive telematics security industries stand leverage token ecosystem 1 use cases expect emerge require dapps light footprint unable host single blockchain blocknet shall provide access token ecosystem devices order harness blockchain specific security properties feel mission critical reducing attack surface iot services specifically blocknet shall enable applications small footprint consume pay inter chain services hosting blockchain locally 1 blocknet xe2 x80 x99s business overview february 2015 details available request contact blocknet co document version 1 0 15 march 2018 page 8 42 x0carchitecture general purpose inter blockchain interoperability achieved integration core components function deliver core services accompanied number blockchain services blockchain components serve enable building unlimited number inter blockchain services xe2 x80 x93 token ecosystem xe2 x80 x93 orchestrated inter chain applications aid reader novel territory shall introduced help series diagrams articulate relations components services diagrams shall progress follows document version 1 0 15 march 2018 page 9 42 x0cthe components shall introduced followed services prior general nature inter chain architecture shall introduced inter chain architecture look like general inter blockchain architecture involve blockchain networks additional entity function deliver interoperability blockchain networks decentralized distributed interoperability component s ought placed central location preserve decentralization required run locally interface nodes edge network figure 1 idealised pair p2p networks disintermediated delivery service node projects proposed solutions following kinds traditional technology centralized intermediary e g poloniex com maximalists decentralized network functions logically centralized intermediary e g bitcoin sidechains context proprietary code e wallets smart contracts bolt ons wallets achieve blockchain interoperability nodes running code e btcrelay walled gardens inter chain protocols instances custom blockchain locks developers building e g aion varieties inter chain technology generic decentralized provide support open ended variety services including existing blockchains fail provide support centralizing control way betrays given service xe2 x80 x99s dependency decentralized blocknet xe2 x80 x99s design objectives satisfactory solution generic decentralized approach xe2 x80 x9cfirst principles xe2 x80 x9d remaining faithful nature inter chain scenario document version 1 0 15 march 2018 page 10 42 x0c1 distributed network architecture firstly unambiguous importance inter chain component s exist edges networks interoperate distributes service blockchain network delivers consumes services additionally inter chain components deliver services edges network requiring central action function centralized intermediary figure 2 suitable inter chain service exist edges network network s 2 decentralized actors secondly relatedly act delivering consuming inter chain service self sovereign subject control party architecturally speaking apart protocol design direct secure means achieve nodes inter chain service component network consuming delivering exist local machine extent necessary xe2 x80 x93 impacts footprint inter chain service xe2 x80 x93 vary ranging requirement run nodes spv nodes merely signing transactions minimum querying blockchain explorer website centralized oracle lowsecurity applications shall considered limit case applicability term xe2 x80 x9cinter chain xe2 x80 x9d range local architecture requirements evinced case limit case manner direct participation delivery consumption network required actor participate decentralized fashion graphically indicated iterating previous diagram document version 1 0 15 march 2018 page 11 42 x0cfigure 3 decentralized inter chain infrastructure blue areas denote varying combinations consuming delivering inter chain nodes nodes outside blue areas support interchain services 3 blockchain lock inter chain service delivered nodes chain inter chain infrastructure limit blockchain given service run achieved essentially kind distributed client server model fact default architecture centralized applications today example blockstream xe2 x80 x99s implementation sidechains require user interact bitcoin blockchain order consume chain xe2 x80 x99s service term pitfall xe2 x80 x9cinter chain centralization xe2 x80 x9d avoid true internet blockchains xe2 x80 x93 support token ecosystem xe2 x80 x93 enable services delivered consumed blockchain chain agnostic notion motivates careful minimising integration requirements app footprint example blocknet require consumer inter chain service maintain copy blocknet xe2 x80 x99s blockchain possibly addition service provider xe2 x80 x99s blockchain usefulness limited user friction high aspect inter chain infrastructure design come bear chiefly monetized delivery service firstly peer peer network actors untrusted necessary payment service delivery atomic secondly node paid native token node different native token exchanged decentralized exchange requires high degree security code quality required blockchains downloaded maintained order consume service unlikely widespread adoption blocknet shall provide means avoid document version 1 0 15 march 2018 page 12 42 x0csummary considerations yield guiding principles design blocknet xe2 x80 x99s components 1 inter chain infrastructural services run edges network s service delivery consumption networks 2 architecturally speaking service decentralization easily achieved running components required delivery consumption service local machine 3 inter chain infrastructural services limit integration requirements footprint possible document version 1 0 15 march 2018 page 13 42 x0ccore components blocknet comprises core components function foundation general purpose interchain service infrastructure xbridge inter chain network overlay xname blockchain router xchat p2p data transport components defined xe2 x80 x9ccore xe2 x80 x9d intuitively inter chain interoperability solution necessarily require means networking nodes different underlying networks means nodes discover route service requests protocol p2p communication suitable node located aid reader remembering visualising complex components services blocknet diagram shall constructed progressively elements introduced following diagram shows blocknet xe2 x80 x99s core components figure 4 iteration blocknet s core components necessity order triangle exist sides joined apexes signifies joint necessity components delivery inter chain services document version 1 0 15 march 2018 page 14 42 x0cxbridge inter chain network overlay blocknet features xbridge serverless dht based peer peer network given local machine nodes network integrated nodes networks making network inter chain network overlay enables lookup location broadcast nodes blockchain network context diagram figure 5 network components local machine technical documentation refer technical specification section implementation current network overlay code implemented xbridgep2p exe blocknet wallet monetized future modularised codebase unlikely released standalone application interoperate components deliver core services document version 1 0 15 march 2018 page 15 42 x0cxname blockchain router ecosystem inter chain services requires means routing messages correct blockchain blocknet shall achieved inter chain address system blockchain routing elementary stages requires exploration agreement broader crypto community fundamentally requires inter chain standard designating blockchains uport xe2 x80 x99s mnid way committing routing data registry lookup function key outstanding question optimal price truthfulness ratio routing results example services benefit free registry service tolerate certain degree bad lookup results eliminating possibility dishonesty lookup immediately prior payment delivery alternatively services require provably truthful lookup results tolerate microfee xname shall agnostic approach registry service design mature solution shall provide diverse integrators xe2 x80 x99 needs necessary including possibility emergence competitive marketplace registry services logical router design direction offload matters truthfulness cost lookup b committing routing data dedicated registry services xe2 x80 x93 including lookup chainids registry services xname xe2 x80 x99s function invoke registry services xe2 x80 x99 apis service delivery completed store locally cache routing results ameliorate circularity having look registry service look service initial launch nodes bootstrap querying hardcoded chainid provably truthful registry service b querying peers xbridge dedicated getregistryservice querying registry service returned exploiting truthfulness guarantees service provide order build truthful local list registry services inter chain services return question commit look inter chain services service lookup registry service sections technical documentation refer technical specification section implementation current blockchain router implemented xbridgep2p exe blocknet wallet core services future component likely interoperate components deliver core services necessarily deployable independently sufficient progress render blockchain routing monetizable monetisation enable service reflect running costs allow competition routing services incentivise technological advancement service monetized router component additionally integrate components blockchain network document version 1 0 15 march 2018 page 16 42 x0cxchat peer peer data transport delivery digital services requires means sending receiving messages service xe2 x80 x99s payload blocknet features xchat end end encrypted peer peer messaging module supports oneto messages group messages broadcast messages supported xbridge inter chain network overlay requirements communication digital service delivery vary nature service privacy bandwidth latency persistence absence presence intermediaries variables service mature data transport technologies early stage supremely private fast peer peer solution appears adequate technical documentation available technical specification section implementation current data transport implemented xbridgep2p exe blocknet wallet core services future modularised codebase monetizable standalone application released document version 1 0 15 march 2018 page 17 42 x0ccore services monetizable inter chain services require core infrastructural services service lookup way discovering peers deliver consume service inter chain messaging way delivering digital service decentralized exchange way monetising delivery service services orchestrations core components represented apexes previous diagram xe2 x80 x99s triangle follows figure 5 second iteration blocknet s core services components apexes triangle sides come positioning services serves signify nature orchestrations core components service lookup inter chain service lookup orchestration xbridge xname xchat components invokes given registry inter chain services blocknet abstracted api fa xc3 xa7ade blocknet matures like traditional internet parties need look locate order interoperate analogue domain system dns required unlike traditional internet services delivered peer peer generally node network servers addressable single ip address order request service characteristically required locate node given blockchain network xe2 x80 x9cchain codes xe2 x80 x9d primary requirement secondary properties assumed services shall generally delivered specific node node significant feature registry service peer peer network untrusted nodes unlike circumstances service provider reasonably trusted intention malicious provide document version 1 0 15 march 2018 page 18 42 x0cdepending design strategy truthfulness data returned service lookup shall guaranteed guarantees service xe2 x80 x99s integrity provided later stage service lookup conducted way cryptographically guarantee truthfulness data regardless intentions node providing service blocknet xe2 x80 x99s design intended agnostic approach registry design taken message steps design assumption typical steps service lookup 1 find peers xbridge 2 retrieve service xe2 x80 x99s chainid servicelist xname 3 query peers xbridge find peer chain designated chainid 4 switch xchat list services specific peer supports 5 request service proceed construct proof truthfulness service design assumption service lookup trivially accomplished original contribution project employing blockchain consensus algorithm e g proof work node looking service host locally blockchain containing chainid data simply query free imposes significant storage uptime burden user expected typical way blocknet outside context users maintain service registry blockchain spv nodes described original bitcoin whitepaper employed greater scalability smaller app footprint time writing alternative proof systems explored trade history registry service sections design patterns context diagram steps imply following high level architecture figure 6 context diagram indicating relations core components local machine utilising service lookup technical documentation available technical specification section document version 1 0 15 march 2018 page 19 42 x0cimplementation current service lookup currently implemented xbridgep2p exe embedded blocknet wallet blocknet xe2 x80 x99s current stage development application implemented decentralized exchange requires nodes filter currency pair generalpurpose lookup service remains built future suitable exploration consensus blockchain ecosystem development generic lookup service planned furthermore simplify consumers xe2 x80 x99 integration underlying components service lookup embodied api fa xc3 xa7ade single fa xc3 xa7ade core services distinct fa xc3 xa7ade specifically lookup probably function time maturity consumer demand inter chain messaging inter chain messaging orchestration xbridge xchat matter service provider consumer locating communicating service delivered service specified assumption consumers shall actively find services service providers shall passively locatable public peer peer networks assumed entity presenting service provider consumer act good faith services necessary prove service xe2 x80 x99s payload legitimate prior making payment consumer receive making payment words services function trustlessly atomically planned way achieve xe2 x80 x9ctrustlessness xe2 x80 x9d context use zero knowledge proof system notes bip 0199 state xe2 x80 x9c v arious practical zero knowledge proving systems exist guarantee hash preimage derives valuable information example zero knowledge proof prove hash preimage acts decryption key encrypted sudoku puzzle solution pay sudoku concrete example protocol xe2 x80 x9c note sake clarity simple digital signature scheme set prove service provider fact consumer thinks constitutes zero knowledge proof sense service provider xe2 x80 x99s private key revealed consumer prove identity service provider actual proof schemes implemented service expected vary particulars needs proved xe2 x80 x9ctrustless xe2 x80 x9d delivery service atomicity context achieved decentralized exchange following section message steps typical steps inter chain messaging service 1 find service network overlay request service preceding section document version 1 0 15 march 2018 page 20 42 x0c2 xchat service provider supplies materials zero knowledge proof payload s legitimacy xe2 x80 x93 creating proof set assertions sufficiently ensures payload xe2 x80 x99s legitimacy trade history section elementary example 3 consumer accepts service 4 service provider proceeds decentralized exchange service commence service delivery interest minimising app footprints simplifying consumption inter chain messaging demand distinct api fa xc3 xa7ade use cases pertinent services free chain lookup hardcoded example decentralized chat app context diagram implies following high level architecture figure 7 context diagram indicating relations core components local machine utilising inter chain messaging service implementation current developers embed xchat applications b exploit network overlay xbridge standalone application embedded form blocknet wallet future components shall modularised apis written addition potentially api fa xc3 xa7ade abstracting orchestrating components explicitly defined service decentralized exchange decentralized exchange trustless atomic means exchanging currency currency service orchestration xbridge xchat wallets blockchain nodes generalised implementation noel tiernan xe2 x80 x99s atomic exchange protocol protocol exploits creation secret knowledge required spending funds fail disclosed funds spent creator spends counterparty xe2 x80 x99s funds counterparty possesses secret spend creator xe2 x80 x99s funds return note decentralized exchange service distinct decentralized exchange application block dx consumes service additional blockchain services document version 1 0 15 march 2018 page 21 42 x0cpreceding work version protocol shown vulnerable malleability based extortion attack later rectified bitcoin clones ecosystem introduction opcode op checklocktimeverify design utilising detailed kay kurokawa xe2 x80 x99s blog subject finally support atomic swaps cryptocurrencies tokens digital payload add protocol use decryption key secure hash function secret revealing secret enables immediate consumption previously supplied encrypted digital good verification truth claim conjunction use zero knowledge proofs preceding section allow consumer verify credibility digital good advance receiving achieves trustless consumption monetised goods services general monetised service protocol protocol steps conceptually protocol steps follows 1 service provider creates decryption key digital goods digital signature cryptographic hash file truth claim verification random number coin trading uses protocol xe2 x80 x99s secret 2 service provider creates xe2 x80 x9cbail xe2 x80 x9d transaction rule xe2 x80 x9cthis transaction spent consumer s supplies secret consumer service provider sign transaction xe2 x80 x9d digital good offered coins quantity coins sufficient cover network fee required 3 service provider creates fallback mechanism form second xe2 x80 x9crefund xe2 x80 x9d transaction rule xe2 x80 x9csend bail transaction xe2 x80 x99s output service provider xe2 x80 x99s address earlier x time xe2 x80 x9d 4 service provider requests consumer sign refund transaction order meet second requirement bail transaction redeemed consumer service provider sign 5 consumer signs refund transaction returns service provider note enables service provider reclaim coins specified time period event consumer abandons exchange factor causes fail complete 6 service provider broadcasts exchange transaction 7 consumer creates xe2 x80 x9cbail xe2 x80 x9d transaction step 2 coins blockchain note consumer xe2 x80 x9cspend xe2 x80 x9d transaction s given secret note transaction requires secret revealed order spent xe2 x80 x93 service provider possession stage 8 consumer creates xe2 x80 x9crefund xe2 x80 x9d transaction step 3 9 consumer requests service provider sign refund transaction step 4 10 service provider signs refund transaction returns consumer note enables consumer reclaim coins event service provider fails redeem secret revealed consumer able consume service receive coins trade 11 consumer broadcasts bail transaction note service provider spend consumer xe2 x80 x99s coins possesses secret document version 1 0 15 march 2018 page 22 42 x0cb note spending consumer xe2 x80 x99s coins service provider reveals secret publicly consumer consume service c note service provider prefer cancel exchange wait time x step 3 broadcast refund transaction 12 service provider spends consumer xe2 x80 x99s exchange transaction revealing secret note service provider fails spend bail transaction consumer broadcast refund transaction receive coins specified time period b note service provider spend consumer xe2 x80 x99s bail transaction time period specified refund transaction consumer free refund 13 consumer uses secret spend service provider xe2 x80 x99s bail transaction decrypt file verify fact note case coin trade consumer spend service provider xe2 x80 x99s exchange transaction time period specified refund transaction service provider free refund note protocol shall include additional supplementary steps service nodes updated state atomic swap order spv nodes xe2 x80 x9clight xe2 x80 x9d clients depend peers relay transactions messages reliably updated message steps implemented blocknet xe2 x80 x99s components decentralized exchange typically involves following steps 1 consumer accepts service steps inter chain messaging section service provider takes protocol steps 1 3 xchat step 4 2 consumer takes protocol step 5 xchat 3 service provider takes protocol step 6 native blockchain network 4 consumer takes protocol steps 7 8 xchat step 9 5 service provider takes protocol step 10 xchat 6 consumer service provider protocol steps 11 13 respective native blockchain networks note steps concern decentralized exchange service decentralized exchange application block dx like applications requires additional non core services order function exchange specifically order broadcast order matching anti spam measures anti dos measures trade fee collection document version 1 0 15 march 2018 page 23 42 x0ccontext diagram steps imply following relations components local machine figure 8 context diagram indicating relations components local machine utilising decentralized exchange service implementation current decentralized exchange service embedded blocknet wallet standalone xbridgep2p exe development resume later stage api available concurrently supporting decentralized exchange application future service shall abstracted blockchain services block dx consumes api fa xc3 xa7ade built orchestrate xchat blockchain services document version 1 0 15 march 2018 page 24 42 x0cblockchain components given local machine core services introduced preceding section interact combination following component types blockchains 1 nodes xe2 x80 x9cregular xe2 x80 x9d featured nodes wallets 2 light nodes spv nodes lighter e g merely sign transactions 3 service nodes nodes special features provide given service regular blockchain work component types generally party integrations built maintained blocknet nonetheless provide necessary function blocknet interacting native blockchains blocknet achieve interoperability duplicating components xe2 x80 x93 untenably inefficient approach core components services plus additional node types consuming delivering inter chain service representable follows figure 9 iteration blockchain components relation core services components blockchain components consume core services relations represented originating apexes triangle document version 1 0 15 march 2018 page 25 42 x0cblockchain services blockchain services supplement general purpose core services support specific use cases limit number inter chain services created blocknet definable limit number blockchain services parties build block dx inter chain dapp blocknet requires blockchain services shall introduced order document illustrate nature blockchain service overview block dx blockchain services function exchange requires services atomic swap counterparties fact exchange centralized decentralized provide key functions capital storage order broadcast order matching settlement block dx decentralized exchange follows necessarily functions decentralized addition broader aspects pertinent decentralization like maintaining fully open source codebase virtually able list coin atomic swaps decentralized exchange service decentralizes capital storage settlement priori atomic swaps exchange order broadcast matching decentralized addition supported blockchain services order broadcast decentralized leveraging service lookup service entirely peer peer order matching performed locally trader xe2 x80 x99s dapp orchestrations core components blockchain components principal design consideration order broadcast matching like peer peer systems naturally vulnerable dos denial service attacks analogous manner bitcoin functions electronic cash system solves byzantine generals xe2 x80 x99 problem workable solution quality service guarantee orders book secondly design considerations token ecosystem monetise service decentralized ecosystem business models cryptoeconomically sound sound follows introductory discussion frames problems blocknet xe2 x80 x99s solution decentralizing order book note following sections detail blocknet xe2 x80 x99s candidate order system systems consideration current included order introduce design space decentralized order systems exist encourage comment contribution new area order book analogous notice board traders add liquidity posting bids asks traders liquidity consuming bids asks acts posting orders book taking come commitments settle accounts match decentralized context order book essentially public notice board free post order central party controls people posting intentions need trade non maliciously document version 1 0 15 march 2018 page 26 42 x0cas decentralized order book requires means ensuring good orders posted prevent order spam b order matched counterparties compelled honour commitments settle prevent order dos surprisingly blockchain good technology use order book reasons firstly order books need operate extremely quickly xe2 x80 x93 supporting realtime user experience xe2 x80 x93 blockchains require transaction generally truth claim blocks deep chain truth sufficiently established secondly blockchains require mining staking establish truth opens opportunity miners gain privileged access order information potentially frontrun favouring matching orders block result different system required decentralize orders final novel fact order book orders commitments future settlement act funds sent risked order broadcast matching process parties order system exposed far lesser degree risk payments settlement offers advantage design order system necessary accept crippling performance penalty use blockchain impart system function successfully tolerating certain degree untruthfulness design requirement minimum standard prevent illicit activity scaling isolated acts specifically blocknet solution b supports utxo verification coins offered order spendable renders order spam unscalable specifically hashcash style trade fee minimal impact honest traders makes spam significantly costly c renders order dos unscalable manner b d renders service node collusion economically infeasible special properties service nodes e supports partial order matching enabling counterparties consume order abandonment trade locking entire order refund transaction spendable supplement trading strategy avoids opportunity cost counterparty abandoning single high value trade spreading capital orders price range decentralized orders look like self sovereignty hold decentralization context orders amounts preserving self sovereignty actors decentralized exchange decentralization understood term frequently conflated xe2 x80 x9cdistribution xe2 x80 x9d muddled notions pertaining reaching consensus decentralization vitalik buterin explains clearly fundamentally control decentralized system places party control matter concern shared resource case parties participate equals distribution contrast simply spreading task role parties regardless party controls finally consensus parties strictly pertains reaching agreement fact action work distributed control decentralized imply decentralize bitcoin require reaching consensus transactions legitimate work distributed edges network factors necessary sufficient decentralization bitcoin decentralizing currency analogous decentralizing orders self sovereignty encountered way holder bitcoins send coins party control trader add liquidity order book liquidity way bitcoin users prove given coin sent given time counterparties verify validity orders order acceptance messages analogy cryptocurrency ends consideration fact orders offers send coins require future counterparty consume involves matching process match requires parties document version 1 0 15 march 2018 page 27 42 x0cinvolved mutually sign order acceptance message entities need required establish order matched peers network determine discover state orders purely self sovereign basis requiring consensus algorithm e g proof work propose entirely self sovereign order system design involving parties cursory overview shall developed discussion progresses order broadcast market maker privately sends order anti spam fee transaction service node broadcast spending coins network fee costing maker money act maliciously validation fee transaction service node signs order market takers use validate order order broadcast traders verify order backed real coins b signed service node signifying trade fee paid traders attempt accept order market maker adjudicates requests standardly accepting valid request selects counterparty counterparty selected maker xe2 x80 x99s interest counterparty dos trade awaits verification service node trade fee paid service node broadcasts signed acceptance message rest market updates order books removing order book block dx xe2 x80 x99s order book functions decentralized state machine following diagram represents state machine high level sections follows introduce certain details diagram document version 1 0 15 march 2018 page 28 42 x0cfigure 10 decentralized state machine orders document version 1 0 15 march 2018 page 29 42 x0cseparation roles service nodes blocknet xe2 x80 x99s order system party system simply counterparties trade surprising comes result considering impact users experience precisely fee charged example possible implement simple decentralized fee solution users required pay trade fee prior placing order result charged cancel order counterparty abandon trade order obtain desired behaviour users charged trade fee trade completes cancel simultaneously fees paid upfront prior placing order party system implemented result separating incentives offer liquidity liquidity check xe2 x80 x99s counterparty paid fee earn trade fees tempted broadcast trade fee transaction maliciously b charging trade fees order accepted overriding intention self sovereignty preserved separating aligning party xe2 x80 x99s incentive behave particular ways complex system simplicity considerations shall discussed time stage discussion point merely service nodes required charge trade fees requiring charged party cancels order accepted detailed protocol sketch exact roles sequence order system special properties service nodes support reliable mechanism accepting spending trade fees anti spam anti dos fees party cancels order accepted service nodes novel properties 1 limited number easily identifiable trading counterparties rely trade fees anti spam anti dos measure necessary easily identify fee paid requires ability differentiate orders order acceptance messages signed service node nodes xe2 x80 x99 signatures achieve require service nodes hold 5000 block way trader easily scan blockchain 5000 block utxos compile list service nodes address containing 5000 block validates order xe2 x80 x99s signature signed service node 2 expensive act maliciously service nodes shall required hold block 1000 blocks begin earning trade fees block rewards service node acts maliciously xe2 x80 x93 broadcasting trade fee user cancels order legitimately xe2 x80 x93 trader involved submit blacklist proof claim network service node escape blacklist block need moved new address case service node lose trade fees block rewards waiting 1000 blocks 3 profit acting maliciously addition high opportunity cost acting maliciously service node directly predictably profit illicitly spending trade fee trade fees awarded winning staker occurs probabilistically indeterminate respect winner service nodes practical profit motive act maliciously 4 supportive cryptocurrencies tokens interoperable blocknet validate order order acceptance message service nodes required verify address es order contain coins fund order significant hardware requirements required document version 1 0 15 march 2018 page 30 42 x0cmaintain node wallets blockchain interoperable blocknet requirement equips service nodes relay messages transactions spv light nodes necessary 5 opportunity practice insider trading service node sign orders practicable service node owner privilege orders trader example trading node delays signing orders order acceptance messages trivially obtain good service service node result properties traders xe2 x80 x9cgood reason xe2 x80 x9d trust testimony service node b ability inflict income loss service node event act truthfully order magnitude greater loss trading fee c observed low level risk traders exposed order process severe performance penalty imposed obtain higher degree certitude warrant obtaining higher degree certitude orders order system protocol assuming preceding discussion general nature realities decentralized order book correct following protocol sketch natural solution note solution area active research contributors blocknet refined 1 maker prepares trade fee maker wants buy x ltc y btc b maker calculates tx fee payable block y 0 05% priceblock note priceblock average buy price market buy block time posting order ii note block bought advance placing order advisable speed e g starting dx app app s block supply decreases 1 block step simply calculate quantity block spend c maker creates broadcast txspamfee trade fee charged market makers order prevent order spam block tx ii network fee set correct 0 05% trade fee iii output maker s address 2 maker posts order maker creates order buy x ltc y btc fields value y ii value x iii btc address es funding order iv ltc address receive coins v maker s xchat contact details address pubkey vi useful data expiration etc vii txid txspamfee b maker sends order txspamfee service node xchat document version 1 0 15 march 2018 page 31 42 x0cc service node validates fee order txid txspamfee identical txspamfee txid field order ii txspamfee network fee 0 05% y 1 note service node check block s price dx calculate correct fee account volatility fee 15% correct value iii txspamfee block address holds sufficient block cover fee iv txs mempool spending block address d service node signs order e service node maker broadcast order signature f service node holds txspamfee memory broadcast immediately 3 taker prepares trade fee taker wants buy y btc x ltc note ux perspective taker likely place market limit order different quantities scenario assumes matching protocol exists pair specific quantities counterparties partially fill orders b taker calculates tx fee payable block x 0 2% priceblock ii note priceblock average buy price market buy block time accepting order note block bought advance placing order advisable speed e g starting dx app app s block supply decreases 1 block step simply calculate quantity block spend c taker creates broadcast txdosfee block tx ii network fee set correct 0 2% trade fee iii output taker s address 4 taker accepts order taker sends order acceptance message maker xchat fields ltc address funding order ii btc address receive coins iii txid txdosfee iv signed privkey btc address b maker validates acceptance message validly signed maker s privkey corresponding maker s btc address ii btc address contains sufficient balance iii txs mempool spending btc address 1 trust note maker validate acceptance message proceed txdosfee validated service node taker dos swap free c maker signs order acceptance message d service node validates order acceptance message 1 trust note maker validate acceptance message service node service node obtain information buy interest given price prior counterparty found b privilege validating acceptance message c block filter acceptance messages arbitrary criteria ii txid txdosfee identical txdosfee txid field acceptance message document version 1 0 15 march 2018 page 32 42 x0ciii txdosfee network fee 0 2% x 1 note service node check block s price dx calculate correct fee account volatility fee 15% correct value iv txdosfee block address holds sufficient block cover fee v txs mempool spending block address e service node signs acceptance message f service node taker broadcast acceptance message g trader s order book parses message signed maker service node order state change open filled removes order book 5 proceed bail tx setup atomic exchange protocol conditions broadcast trade fee transactions service node shall broadcast trade fee transaction xe2 x97 x8f xe2 x97 x8f xe2 x97 x8f xe2 x97 x8f order expires payer closes app accepting order order cancelled prior accepted step 4f counterparty fails broadcast bail transaction order matching system blocknet requires decentralized system translating standard order types exchanges market limit etc basic liquidity consumption events b matching quantities coin quantities coin specified prices adopting decentralized order state machine presented xe2 x80 x93 parties adopt selfsovereign roles maker taker xe2 x80 x93 order matching consists takers requesting consume liquidity makers case limit orders presence absence orders certain threshold functioning determine trader xe2 x80 x99s role maker taker behaviour market order follows consume orders book beginning best priced order moving best priced forth market order completely consumed market order consumes orders order book completely consumed cancel remaining order behaviour limit order follows order sell price order lower buy price order higher highest lowest counteroffer order book consume orders book user s order lowest highest offer completely consumed add remainder trader s order order book avoid issues change utxo based cryptocurrencies xe2 x80 x93 resulting need wait change confirm rest order traded xe2 x80 x93 xbridge shall automate distribution trading wallets xe2 x80 x99 coins small regular amounts separate addresses order maximise number outputs completely consumed counterparty minimise change trivial levels additionally minimum trade size shall imposed corresponds size amounts address prevent malicious creation change document version 1 0 15 march 2018 page 33 42 x0ctrade history service history trades coins required charting technical analysis tools general traders obtain information market trading decisions truthfulness trade history paramount importance considerable advantage traders gained fabricate trade history given currency pair shall provided xe2 x80 x9ctrustless xe2 x80 x9d manner blocknet service solution sketch follows somewhat idealised reasons simplicity order present leading idea detailed technical solution production ready solution considerably succinct including trade history data atomic swap transactions instead employ sophisticated zero knowledge proof scheme like example bulletproofs xe2 x80 x9ctrustless xe2 x80 x9d dataset require suitably truthful means committing trade history data b equally truthful means retrieving data solution follows trade history blockchain created nodes xe2 x80 x99 work establishing consensus committing trade transaction data blockchains trade history blockchain typical data committed include o coin o coin b o quantity coin o quantity coin b o price coin coin b o time bail tx spent data committed sufficient consumers data synthesise forms example tradingview charts following data required o period candle o start time candle o open price o close price o high o low o forth commitment proof data commit trade data nodes trade history blockchain submit proof data o coin o coin b o txid spent bail transaction chain o txid spent bail transaction chain b mark absent o txid spent trade fee transaction market maker o txid spent trade fee transaction market taker o timestamps transactions o timestamp transaction proof data submitted proof data submitted node verified network searching blockchains coins involved trade validating proof data coins xe2 x80 x99 blockchains nodes engage deduplication document version 1 0 15 march 2018 page 34 42 x0cexercise similar mining respect fact network determine node submit proof data given trade discard proof data submitted nodes data retrieval methods multiple way retrieve trade history data traders o download trade history blockchain retrieve data free o store local memory completed trades xe2 x80 x93 require running block dx continually o request trade history node trade history chain fee practice useful updating chart realtime xe2 x97 x8f specified coin pair xe2 x97 x8f specified time supply trade history data supply trade history traders nodes trade history blockchain submit o hash txids coin coin b trade fees time range specified trader o node xe2 x80 x99s address data trader constructs simple zero knowledge proof note truthfulness data requesting trade history nodes trade history blockchain verifying supplied hashes identical results identical amounts low probability data untruthful nodes good reason trust strong position collude maliciously trader wishes obtain greater certainty truthfulness data s request trade history mode nodes download blockchain nodes monitor xe2 x80 x99 responses traders punish dishonest nodes submitting proofs response unfaithful record blockchain basis trivial network reach consensus dishonesty node blacklist trader satisfied response s trade history nodes pick node supply hashes commence atomic swap following properties o o bail transaction spendable xe2 x96 xaa private key corresponding address node provided xe2 x96 xaa trade history data corresponding hash provided words trade history data functions secret atomic swap trade history node spends bail transaction reveal trade history data trader receives simultaneously trade history data revealed trader paying current simplistic sketch properties worth noting size requested dataset limited maximum field length secret transaction format drives revenue trade history nodes requiring traders submit request desire trade data longer timeframe fee dataset dynamically adjusted trade volume greater volume unit time reduce time span dataset certain maximum size mild obfuscation trade history data provided traders intercepting requested trade history data trade history node reveals trading pair timeframe included dataset obviously useful expensive complex synthesise document version 1 0 15 march 2018 page 35 42 x0c strong obfuscation trade history data afforded sent encrypted xchat secret atomic swap functioning decryption key data require sophisticated zero knowledge proof sketch registry service trade history service appears generalisable provide workable registry service inter chain services intuitively trade coin digital good instead commit lookup phases blockchain routing remain unchanged required addition trade history nodes filter blockchain xe2 x80 x99s record trades recent record chainid appears compile resulting list chainids associated serviceids list delivered instead trade history protocol preceding section document version 1 0 15 march 2018 page 36 42 x0cproject phases following section broad outline long term course project intended gauging overall scope series commitments development milestones shorter term roadmaps defined milestones published necessary production mvp xe2 x97 x8f xe2 x97 x8f monolithic client node o blockchain router o xchat protocol o service monetisation mechanism o trade fee distribution mechanism decentralized exchange dapp o frontend ui o market limit stop orders o order book o order history o user open orders o tradingview charts integration xe2 x97 x8f uses user s account api credentials o setup wizard automatic wallet api charting api configuration o risk control number confirmations acceptable document version 1 0 15 march 2018 xe2 x97 x8f filters order book xe2 x97 x8f allows place orders sooner xe2 x97 x8f change handling xe2 x96 xaa order accepted change returned xe2 x96 xaa change unspendable x minutes xe2 x96 xaa goes appropriate risk bracket xe2 x96 xaa order s risk bracket auto updates coin age page 37 42 x0cphase 2 xe2 x97 x8f modularise xbridgep2p o blockchain router module o xchat module o coin exchange module o decentralized exchange client xe2 x97 x8f apis modular components xe2 x97 x8f support data payload exchange protocol xe2 x97 x8f easy interoperability exchange protocol xchat transport protocol controlled dapp phase 3 xe2 x97 x8f support order types trailing stop oco xe2 x97 x8f support leaving orders book closing app orders committed blockchain phase 4 xe2 x97 x8f protocol enhancement derivative market swaps p2p margin lending xe2 x97 x8f protocol enhancement generic derivative markets document version 1 0 15 march 2018 page 38 42 x0ctechnical specification easier maintenance order retain single source truth low level documentation section moved github message sequences forthcoming https github com blocknetdx blocknet docs api reference https github com blocknetdx blockdx blob master doc dx dxapi md document version 1 0 15 march 2018 page 39 42 x0cuse cases infrastructure existing ecosystem presents difficulties imagination xe2 x80 x9cwhat xe2 x80 x9d single common design focused question asked correct answer like xe2 x80 x9canything benefit token ecosystem xe2 x80 x9d xe2 x80 x93 things abstract answer short list use cases blocknet 1 decentralized exchange decentralized exchange crypto tokens fact core service blocknet necessary monetisation service easy use dapp ui blocknet xe2 x80 x99s consumer product fulfils real need crypto community decentralized trading technology prevalence hacks fraud failure theft centralized crypto exchanges resulted alarming 1 16 bitcoins stolen workable decentralized exchange provide vital enabling function fledgling token ecosystem safe secure exchange coins tokens 2 blockchain router blockchain routing core service blocknet inter chain traffic routable intended destinations said consumable valuable service node require order deliver consume inter chain service blocknet xe2 x80 x99s incipient router xbridge currently delivers free service remain indefinite future 3 inter chain messaging chat app data transport inter chain messaging indispensable service token ecosystem decentralized exchange blockchain routing core blocknet service goes xe2 x80 x9cxchat xe2 x80 x9d end end encrypted peer peer ultra secure delivery digital goods messages currently free service currently packaged alongside blockchain router xbridge 4 mobile app exploiting multiple chains mobile app small footprint likely spv node native blockchain token xe2 x97 x8f consume services coins xe2 x97 x8f blockchain services consumes shall run blocknet components xe2 x97 x8f app requests service service shall generate xe2 x80 x9csecret xe2 x80 x9d decryption key digital goods xe2 x97 x8f service shall send data enabling app construct zero knowledge proof goods legitimate xe2 x97 x8f shall shall create bail transaction atomic swap xe2 x97 x8f service shall spend bail transaction later trade coin preferred document version 1 0 15 march 2018 page 40 42 x0c xe2 x97 x8f 5 app receives secret consumes service near perfect coin mixer private currency zcash zcoin monero integrate xbridge script automatic trading currency private currency original currency decentralized exchange require party trusted users xe2 x80 x99 data atomic swap involves counterparty risk result nearly perfectly private mixing service 6 decentralized marketplace app marketplace app typically require following services customer reputation info b payment processing c image storage d item listings microservices architecture advisable reasons given gaining advantages utilising multiple blockchains chain store encrypted customer info item 13 list use xbridge accept payments cryptocurrency store images server use chain wallet code item listings ui elements result scalable composable set services easier bugfix upgrade replace 7 fuel converter ethereum smart contracts decentralized exchange ethereum contract supplied gas coins 8 truly decentralized stablecoin stablecoin maintain peg exploiting fact trade records decentralized exchange onchain provably truthful dataset available determining mint burn coins freeze unfreeze order maintain peg 9 self sovereign id personal information manager personal information service records encrypted personal metadata given blockchain equipped revocable permissioning system users acquire self sovereignty personal information point integrate blockchain website app requiring sign users voluntarily sell metadata advertisers micropayments support passport identity systems emerging technologies positioned exploit use case bitnation microsoft xe2 x80 x99s coco framework 10 supply chain 2 0 solution blocknet infrastructure suited function xe2 x80 x9csupply chain 2 0 xe2 x80 x9d backbone parties typically find different blockchains need interoperate exploiting blocknet services multichain apps able read data chains specialized shipping data like bill lading product manufacturing data like bill material financial dat forth comparing metadata sources blocknet empower companies limit attack vectors like invoice spoofing certification counterfeiting 11 iot infrastructure perennial iot security issues solved exploiting blockchain technology interoperating thousands blockchains blocknet diverse opportunities granular monetisation present example accomplish transaction batching chains spv wallets data stream tokenized nodes incentivised engage pattern finding company xe2 x80 x99s big data document version 1 0 15 march 2018 page 41 42 x0c12 app ad service mobile app earns users tokens screening ads delivered app blocknet service tokens power inter chain service consumption app delivering xe2 x80 x9cfree xe2 x80 x9d service user monetised service providers 13 decentralized p2p storage solution blockchain based storage solution storj user base significantly enlarged monetized inter chain service delivery 14 permissionless ico platform offer token sale decentralized exchange permission required 15 business case tool distributed budget management crypto projects typically launched big crowdsourced business case ico budget negotiated market actual account balance fluctuates price cryptocurrency crowdsourcing conducted changes value blocknet developers manage distribution tokens accounts chains furthermore use smart contract disbursements investments coins managed general project xe2 x80 x99s business plan coded automatically executed contract perfect transparency 16 integration erp crm plm systems companies blocknet xe2 x80 x99s simple api based integration enables interoperability directly indirectly consortiumtype private blockchains like oracle sap 17 infrastructure internet value blocknet xe2 x80 x99s inter chain infrastructure shall function increasingly time create xe2 x80 x9cinternet value xe2 x80 x9d inherently truthful transparent fairly available companies xe2 x80 x99 general sub ledgers come gradually interface companies xe2 x80 x99 ledgers blockchains resulting network blockchains representation value streams given system xe2 x80 x99s value enables advanced deep awareness value entire systems correspondingly powerful far reaching consequences financial system document version 1 0 15 march 2018 page 42 42 x0c